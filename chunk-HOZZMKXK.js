import{A as Nt,B as Ot,C as Rt,E as It,F as Vt,N as de,O as Ft,Q as kt,g as At,j as Dt,l as Mt,n as St,o as Pt,w as yt,x as wt,y as Tt}from"./chunk-M4HTWXPZ.js";import{I as xt,p as ue}from"./chunk-KQ2TSCHQ.js";import{$c as oe,$e as Et,Aa as Ye,De as vt,Fc as ct,Gb as W,Hb as nt,Ia as S,La as te,Oa as ne,Ob as it,Pb as st,Ra as _e,Ua as z,Ub as rt,Vd as ft,Wa as ie,Xa as P,_e as ce,a as F,b as j,bd as ut,c as He,ce as le,da as Be,dd as dt,de as gt,e as Ue,eb as H,ec as ot,fb as U,ga as v,gc as at,hb as Xe,hf as Ct,ib as Ke,id as Pe,if as bt,jb as Qe,kb as Ae,kc as lt,ma as ee,na as We,nb as B,nd as mt,oa as A,ob as O,pb as qe,qa as Ge,qb as se,qf as _t,r as J,ra as T,rb as Je,sa as N,sb as et,sd as ht,tb as De,td as ae,ua as xe,ub as Me,vb as Se,vd as pt,wb as re,ya as Ze,yb as tt}from"./chunk-535B6TDL.js";function gn(n){let e=String(n),[s,t]=e.split("e-"),i=e;if(t){let[,r=""]=(s==null?void 0:s.split("."))??[],o=Number(t)+((r==null?void 0:r.length)||0);i=n.toFixed(o)}return i}function vn(n,e){let[,s=""]=gn(n).split(".");return mt(e)?s.slice(0,Math.max(0,e)):s}function Lt(n,e={}){let{precision:s,decimalSeparator:t,thousandSeparator:i,decimalMode:r,rounding:o}=F(j(F({},ce),{decimalMode:"always",precision:1/0}),e),l=Number.isFinite(s)?ut({value:n,precision:s,method:o}):n,a=String(Math.floor(Math.abs(l))),c=vn(l,s),u=Number(c)>0;if(Number.isFinite(s))if(r==="always"||u&&r==="pad"){let p=Math.max(s-c.length,0),f="0".repeat(p);c=`${c}${f}`}else c=c.replace(/0*$/,"");let d=a.length%3,h=(n<0?le:"")+a.charAt(0);for(let p=1;p<a.length;p++)p%3===d&&a.length>3&&(h+=i),h+=a.charAt(p);return c?h+t+c:h}function Ti(n){if(n==="")return"";let e=0;for(let r=0;r<n.length;r++)e=n.charCodeAt(r)+((e<<5)-e),e&=e;let s=e%360,t=60+e%5,i=80+e%5;return`hsl(${s},${t}%,${i}%)`}var En=65536,ye=class{constructor(e){this.$implicit=e}},ki=(()=>{let e=class e{constructor(){this.viewContainer=v(ne),this.templateRef=v(te)}set tuiRepeatTimesOf(t){let i=Math.floor(oe(t,0,En)),{length:r}=this.viewContainer;t<r?this.removeContainers(r-t):this.addContainers(i)}addContainers(t){for(let i=this.viewContainer.length;i<t;i++)this.viewContainer.createEmbeddedView(this.templateRef,new ye(i))}removeContainers(t){for(let i=0;i<t;i++)this.viewContainer.remove()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=A({type:e,selectors:[["","tuiRepeatTimes","","tuiRepeatTimesOf",""]],inputs:{tuiRepeatTimesOf:"tuiRepeatTimesOf"},standalone:!0});let n=e;return n})();function $t(n){let{anchorOffset:e=0,focusOffset:s=0}=n.ownerDocument.getSelection()||{},t=Math.min(e,s),i=Math.max(e,s);return[t,i]}function Cn(n,[e,s]){var t,i,r,o;let l=n.ownerDocument,a=l.createRange();a.setStart(n.firstChild||n,Math.min(e,(i=(t=n.textContent)===null||t===void 0?void 0:t.length)!==null&&i!==void 0?i:0)),a.setEnd(n.lastChild||n,Math.min(s,(o=(r=n.textContent)===null||r===void 0?void 0:r.length)!==null&&o!==void 0?o:0));let c=l.getSelection();c&&(c.removeAllRanges(),c.addRange(a))}var we=class{constructor(e){this.element=e,this.maxLength=1/0}get value(){return this.element.innerText.replace(/\n\n$/,`
`)}set value(e){this.element.innerHTML=e.replace(/\n$/,`

`)}get selectionStart(){return $t(this.element)[0]}get selectionEnd(){return $t(this.element)[1]}setSelectionRange(e,s){Cn(this.element,[e??0,s??0])}select(){this.setSelectionRange(0,this.value.length)}};function bn(n){let e=new we(n);return new Proxy(n,{get(s,t){if(t in e)return e[t];let i=s[t];return typeof i=="function"?i.bind(s):i},set(s,t,i,r){return Reflect.set(t in e?e:s,t,i,r)}})}var Ut=n=>n.isContentEditable?bn(n):n.querySelector("input,textarea")||n,R={mask:/^.*$/,preprocessors:[],postprocessors:[],plugins:[],overwriteMode:"shift"},Te=class{constructor(){this.now=null,this.past=[],this.future=[]}undo(){let e=this.past.pop();e&&this.now&&(this.future.push(this.now),this.updateElement(e,"historyUndo"))}redo(){let e=this.future.pop();e&&this.now&&(this.past.push(this.now),this.updateElement(e,"historyRedo"))}updateHistory(e){if(!this.now){this.now=e;return}let s=this.now.value!==e.value,t=this.now.selection.some((i,r)=>i!==e.selection[r]);!s&&!t||(s&&(this.past.push(this.now),this.future=[]),this.now=e)}updateElement(e,s){this.now=e,this.updateElementState(e,{inputType:s,data:null})}};function xn(n,...e){return e.every(({value:s})=>s===n.value)}function _n(n,...e){return e.every(({value:s,selection:t})=>s===n.value&&t[0]===n.selection[0]&&t[1]===n.selection[1])}function An({value:n,selection:e},s,t){let[i,r]=e,o=typeof t=="function"?t({value:n,selection:e}):t;return{value:n,selection:o==="replace"?[i,Math.max(i+s.length,r)]:[i,r]}}function ge(n){return typeof n=="string"}function jt(n,e,s,t){let i="";for(let r=e.length;r<n.length;r++){let o=n[r]||"",l=(t==null?void 0:t.value[r])===o;if(!ge(o)||o===s&&!l)return i;i+=o}return i}function Bt(n,e){return Array.isArray(e)?n.length===e.length&&Array.from(n).every((s,t)=>{let i=e[t]||"";return ge(i)?s===i:s.match(i)}):e.test(n)}function Dn(n,e,s){let t=null,i=null,r=Array.from(n.value).reduce((l,a,c)=>{let u=jt(e,l,a,s),d=l+u,m=e[d.length]||"";return t===null&&c>=n.selection[0]&&(t=d.length),i===null&&c>=n.selection[1]&&(i=d.length),ge(m)?d+m:a.match(m)?d+a:d},""),o=jt(e,r,"",s);return{value:Bt(r+o,e)?r+o:r,selection:[t??r.length,i??r.length]}}function Mn({value:n,selection:e},s){let[t,i]=e,r=t,o=i;return{value:Array.from(n).reduce((a,c,u)=>{let d=a+c;return t===u&&(r=a.length),i===u&&(o=a.length),d.match(s)?d:a},""),selection:[r,o]}}function he(n,e,s=null){if(Bt(n.value,e))return n;let{value:t,selection:i}=Array.isArray(e)?Dn(n,e,s):Mn(n,e);return{selection:i,value:Array.isArray(e)?t.slice(0,e.length):t}}function zt(n,e){if(!Array.isArray(e))return n;let[s,t]=n.selection,i=[],r=Array.from(n.value).reduce((o,l,a)=>{let c=e[a]||"";return a===s&&i.push(o.length),a===t&&i.push(o.length),ge(c)&&c===l?o:o+l},"");return i.length<2&&i.push(...new Array(2-i.length).fill(r.length)),{value:r,selection:[i[0],i[1]]}}var Y=class{constructor(e,s){this.initialElementState=e,this.maskOptions=s,this.value="",this.selection=[0,0];let{value:t,selection:i}=he(this.initialElementState,this.getMaskExpression(this.initialElementState));this.value=t,this.selection=i}addCharacters([e,s],t){let{value:i,maskOptions:r}=this,o=this.getMaskExpression({value:i.slice(0,e)+t+i.slice(s),selection:[e+t.length,e+t.length]}),l={value:i,selection:[e,s]},a=zt(l,o),[c,u]=An(a,t,r.overwriteMode).selection,d=a.value.slice(0,c)+t,m=d.length,h=he({value:d+a.value.slice(u),selection:[m,m]},o,l);if(i.slice(0,e)===he({value:d,selection:[m,m]},o,l).value||_n(this,h))throw new Error("Invalid mask value");this.value=h.value,this.selection=h.selection}deleteCharacters([e,s]){if(e===s||!s)return;let{value:t}=this,i=this.getMaskExpression({value:t.slice(0,e)+t.slice(s),selection:[e,e]}),r={value:t,selection:[e,s]},o=zt(r,i),[l,a]=o.selection,c=o.value.slice(0,l)+o.value.slice(a),u=he({value:c,selection:[l,l]},i,r);this.value=u.value,this.selection=u.selection}getMaskExpression(e){let{mask:s}=this.maskOptions;return typeof s=="function"?s(e):s}},Ne=class{constructor(e){this.element=e,this.listeners=[]}listen(e,s,t){let i=s;this.element.addEventListener(e,i,t),this.listeners.push(()=>this.element.removeEventListener(e,i,t))}destroy(){this.listeners.forEach(e=>e())}},x={CTRL:1,ALT:2,SHIFT:4,META:8},G={Y:89,Z:90};function Z(n,e,s){return n.ctrlKey===!!(e&x.CTRL)&&n.altKey===!!(e&x.ALT)&&n.shiftKey===!!(e&x.SHIFT)&&n.metaKey===!!(e&x.META)&&n.keyCode===s}function Sn(n){return Z(n,x.CTRL,G.Y)||Z(n,x.CTRL|x.SHIFT,G.Z)||Z(n,x.META|x.SHIFT,G.Z)}function Pn(n){return Z(n,x.CTRL,G.Z)||Z(n,x.META,G.Z)}function ve(n,e){var s;let t=n.value;if(typeof e=="string")n.value=e;else{let[i,r]=e.selection;n.value=e.value,n.matches(":focus")&&((s=n.setSelectionRange)===null||s===void 0||s.call(n,i,r))}n.value!==t&&n.dispatchEvent(new Event("input",{bubbles:!0}))}function yn({value:n,selection:e},s){let[t,i]=e;if(t!==i)return[t,i];let r=s?n.slice(t).indexOf(`
`)+1||n.length:n.slice(0,i).lastIndexOf(`
`)+1;return[s?t:r,s?r:i]}function wn({value:n,selection:e},s){let[t,i]=e;return t!==i?[t,i]:(s?[t,i+1]:[t-1,i]).map(o=>Math.min(Math.max(o,0),n.length))}var Tn=/\s+$/g,Nn=/^\s+/g,Ht=/\s/;function On({value:n,selection:e},s){let[t,i]=e;if(t!==i)return[t,i];if(s){let a=n.slice(t),[c]=a.match(Nn)||[""],u=a.trimStart().search(Ht);return[t,u!==-1?t+c.length+u:n.length]}let r=n.slice(0,i),[o]=r.match(Tn)||[""],l=r.trimEnd().split("").reverse().findIndex(a=>Ht.exec(a));return[l!==-1?i-o.length-l:0,i]}function pe(n=[]){return(e,...s)=>n.reduce((t,i)=>Object.assign(Object.assign({},t),i(t,...s)),e)}function k(n,e){let s=Object.assign(Object.assign({},R),e),t=pe(s.preprocessors),i=pe(s.postprocessors),r=typeof n=="string"?{value:n,selection:[0,0]}:n,{elementState:o}=t({elementState:r,data:""},"validation"),l=new Y(o,s),{value:a,selection:c}=i(l,r);return typeof n=="string"?a:{value:a,selection:c}}var fe=class extends Te{constructor(e,s){super(),this.element=e,this.maskitoOptions=s,this.isTextArea=this.element.nodeName==="TEXTAREA",this.eventListener=new Ne(this.element),this.options=Object.assign(Object.assign({},R),this.maskitoOptions),this.upcomingElementState=null,this.preprocessor=pe(this.options.preprocessors),this.postprocessor=pe(this.options.postprocessors),this.teardowns=this.options.plugins.map(t=>t(this.element,this.options)),this.updateHistory(this.elementState),this.eventListener.listen("keydown",t=>{if(Sn(t))return t.preventDefault(),this.redo();if(Pn(t))return t.preventDefault(),this.undo()}),this.eventListener.listen("beforeinput",t=>{var i,r,o;let l=t.inputType.includes("Forward");switch(this.updateHistory(this.elementState),t.inputType){case"historyUndo":return t.preventDefault(),this.undo();case"historyRedo":return t.preventDefault(),this.redo();case"deleteByCut":case"deleteContentBackward":case"deleteContentForward":return this.handleDelete({event:t,isForward:l,selection:wn(this.elementState,l)});case"deleteWordForward":case"deleteWordBackward":return this.handleDelete({event:t,isForward:l,selection:On(this.elementState,l),force:!0});case"deleteSoftLineBackward":case"deleteSoftLineForward":case"deleteHardLineBackward":case"deleteHardLineForward":return this.handleDelete({event:t,isForward:l,selection:yn(this.elementState,l),force:!0});case"insertCompositionText":return;case"insertReplacementText":return;case"insertLineBreak":case"insertParagraph":return this.handleEnter(t);case"insertFromPaste":case"insertText":case"insertFromDrop":default:return this.handleInsert(t,(o=(i=t.data)!==null&&i!==void 0?i:(r=t.dataTransfer)===null||r===void 0?void 0:r.getData("text/plain"))!==null&&o!==void 0?o:"")}}),this.eventListener.listen("input",()=>{this.upcomingElementState&&(this.updateElementState(this.upcomingElementState),this.upcomingElementState=null)},{capture:!0}),this.eventListener.listen("input",({inputType:t})=>{t!=="insertCompositionText"&&(this.ensureValueFitsMask(),this.updateHistory(this.elementState))}),this.eventListener.listen("compositionend",()=>{this.ensureValueFitsMask(),this.updateHistory(this.elementState)})}destroy(){this.eventListener.destroy(),this.teardowns.forEach(e=>e==null?void 0:e())}updateElementState({value:e,selection:s},t){let i=this.elementState.value;this.updateValue(e),this.updateSelectionRange(s),t&&i!==e&&this.dispatchInputEvent(t)}get elementState(){let{value:e,selectionStart:s,selectionEnd:t}=this.element;return{value:e,selection:[s??0,t??0]}}get maxLength(){let{maxLength:e}=this.element;return e===-1?1/0:e}updateSelectionRange([e,s]){var t;let{element:i}=this;i.matches(":focus")&&(i.selectionStart!==e||i.selectionEnd!==s)&&((t=i.setSelectionRange)===null||t===void 0||t.call(i,e,s))}updateValue(e){this.element.value=e}ensureValueFitsMask(){this.updateElementState(k(this.elementState,this.options),{inputType:"insertText",data:null})}dispatchInputEvent(e={inputType:"insertText",data:null}){globalThis.InputEvent&&this.element.dispatchEvent(new InputEvent("input",Object.assign(Object.assign({},e),{bubbles:!0,cancelable:!1})))}handleDelete({event:e,selection:s,isForward:t,force:i=!1}){let r={value:this.elementState.value,selection:s},[o,l]=r.selection,{elementState:a}=this.preprocessor({elementState:r,data:""},t?"deleteForward":"deleteBackward"),c=new Y(a,this.options),[u,d]=a.selection;c.deleteCharacters([u,d]);let m=this.postprocessor(c,r);if(!(r.value.slice(0,o)+r.value.slice(l)===m.value&&!i&&!this.element.isContentEditable)){if(xn(r,a,c,m))return e.preventDefault(),this.updateSelectionRange(t?[d,d]:[u,u]);this.upcomingElementState=m}}handleInsert(e,s){let{options:t,maxLength:i,element:r,elementState:o}=this,{elementState:l,data:a=s}=this.preprocessor({data:s,elementState:o},"insert"),c=new Y(l,t);try{c.addCharacters(l.selection,a)}catch{return e.preventDefault()}let[u,d]=l.selection,m=o.value.slice(0,u)+s+o.value.slice(d),h=this.postprocessor(c,o);if(h.value.length>i)return e.preventDefault();(m!==h.value||r.isContentEditable)&&(this.upcomingElementState=h,t.overwriteMode==="replace"&&m.length>i&&this.dispatchInputEvent({inputType:"insertText",data:s}))}handleEnter(e){(this.isTextArea||this.element.isContentEditable)&&this.handleInsert(e,`
`)}};var Wt=(()=>{let e=class e{constructor(){this.elementRef=v(Ye).nativeElement,this.ngZone=v(Ze),this.maskedElement=null,this.options=null,this.elementPredicate=Ut;let t=v(ct,{self:!0,optional:!0});if(t){let i=t.writeValue.bind(t);t.writeValue=r=>{i(this.options?k(String(r??""),this.options):r)}}}ngOnChanges(){return Ue(this,null,function*(){let{elementPredicate:t,options:i,maskedElement:r,elementRef:o,ngZone:l}=this;if(r==null||r.destroy(),!i)return;let a=yield t(o);this.elementPredicate!==t||this.options!==i||l.runOutsideAngular(()=>{this.maskedElement=new fe(a,i)})})}ngOnDestroy(){var t;(t=this.maskedElement)==null||t.destroy()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=A({type:e,selectors:[["","maskito",""]],inputs:{options:[0,"maskito","options"],elementPredicate:[0,"maskitoElement","elementPredicate"]},standalone:!0,features:[Ge]});let n=e;return n})();var In=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=ee({type:e,selectors:[["ng-component"]],hostAttrs:[1,"tui-cell"],standalone:!0,features:[nt],decls:0,vars:0,template:function(i,r){},styles:[`[tuiCell]{--t-padding: .125rem 1rem;--t-radius: var(--tui-radius-s);-webkit-appearance:none;appearance:none;padding:0;border:0;background:none;font-size:inherit;line-height:inherit;text-decoration:none;position:relative;display:flex;align-items:center;box-sizing:content-box;isolation:isolate;color:var(--tui-text-primary);padding:var(--t-padding);min-block-size:var(--t-height);border-radius:var(--t-radius)}[tuiCell]:disabled{pointer-events:none}[tuiCell] [tuiAccessories]{position:relative;display:flex;max-block-size:var(--t-height);align-items:center;align-self:stretch}[tuiCell] [tuiCellActions]{position:absolute;right:0;z-index:1;padding-right:inherit}[tuiCell] [tuiCellActions]~*{transition-property:opacity;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}[tuiCell] [tuiCellActions] button,[tuiCell] [tuiCellActions] a{transition-property:opacity;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;opacity:0}[tuiCell] [tuiCellActions] button:focus-visible,[tuiCell] [tuiCellActions] a:focus-visible{opacity:1}[tuiCell] [tuiSubtitle]{display:flex;align-items:center;gap:.25rem;color:var(--tui-text-secondary)}[tuiCell] [tuiTitle]{flex-shrink:7;margin-inline-end:auto;align-items:normal;text-align:start}[tuiCell] [tuiTitle]~[tuiTitle]{flex-shrink:3;margin-inline-end:0;text-align:end;align-items:flex-end}[tuiCell] [tuiTitle]~[tuiTitle][tuiFade]{align-items:flex-start}[tuiCell] tui-badge-notification[data-size=xs]{position:absolute;top:50%;transform:translateY(-50%);left:-.625rem}[tuiCell][data-size=s]{--t-height: calc(var(--tui-height-s) - .5rem);--t-padding: .125rem 1rem}[tuiCell][data-size=s] [tuiTitle]{max-block-size:100%;font:var(--tui-font-text-ui-s);gap:0}[tuiCell][data-size=s] [tuiSubtitle]{font:var(--tui-font-text-ui-xs)}[tuiCell][data-size=s]>*:not(:first-child),[tuiCell][data-size=s]>[tuiAccessories]>*:not(:first-child){margin-inline-start:.5rem}[tuiCell][data-size=s]>tui-avatar,[tuiCell][data-size=s]>tui-avatar-stack tui-avatar,[tuiCell][data-size=s]>[tuiAccessories] tui-avatar,[tuiCell][data-size=s]>[tuiAccessories] tui-avatar-stack tui-avatar{--t-size: 1.5rem;font:var(--tui-font-text-m);font-size:.5625rem}[tuiCell][data-size=m]{--t-height: calc(var(--tui-height-m) - .75rem);--t-padding: .375rem 1rem}[tuiCell][data-size=m] [tuiTitle]{font:var(--tui-font-text-ui-s);gap:.125rem}[tuiCell][data-size=m] [tuiSubtitle]{font:var(--tui-font-text-ui-xs)}[tuiCell][data-size=m]>*:not(:first-child),[tuiCell][data-size=m]>[tuiAccessories]>*:not(:first-child){margin-inline-start:.75rem}[tuiCell][data-size=m]>tui-avatar,[tuiCell][data-size=m]>tui-avatar-stack tui-avatar,[tuiCell][data-size=m]>[tuiAccessories] tui-avatar,[tuiCell][data-size=m]>[tuiAccessories] tui-avatar-stack tui-avatar{--t-size: 2rem;align-self:flex-start}[tuiCell][data-size=l]{--t-height: calc(var(--tui-height-l) - 1rem);--t-padding: .5rem 1rem;--t-radius: var(--tui-radius-l)}[tuiCell][data-size=l]>*:not(:first-child),[tuiCell][data-size=l]>[tuiAccessories]>*:not(:first-child){margin-inline-start:1rem}[tuiCell][data-size=l]>tui-avatar,[tuiCell][data-size=l]>tui-avatar-stack tui-avatar,[tuiCell][data-size=l]>[tuiAccessories] tui-avatar,[tuiCell][data-size=l]>[tuiAccessories] tui-avatar-stack tui-avatar{--t-size: 2.5rem;font:var(--tui-font-text-m);font-weight:700;align-self:flex-start}[tuiCell]:hover [tuiCellActions]~*{opacity:0}[tuiCell]:hover [tuiCellActions] button,[tuiCell]:hover [tuiCellActions] a,[tuiCell]:hover [tuiCellActions] label{opacity:1}[tuiOption] [tuiCell],tui-primitive-textfield [tuiCell]{padding:0}@media (hover: hover) and (pointer: fine){a[tuiCell]:not([tuiSurface]):hover,button[tuiCell]:not([tuiSurface]):hover,label[tuiCell]:not([tuiSurface]):hover{background:var(--tui-background-neutral-1);cursor:pointer}}
`],encapsulation:2,changeDetection:0});let n=e;return n})(),Qi=(()=>{let e=class e{constructor(){this.nothing=pt(In),this.size=""}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=A({type:e,selectors:[["","tuiCell","",5,"ng-template"]],hostAttrs:["tuiCell",""],hostVars:1,hostBindings:function(i,r){i&2&&ie("data-size",r.size||"l")},inputs:{size:[0,"tuiCell","size"]},standalone:!0,features:[W([_t({size:"m"}),Ct({size:"s"})])]});let n=e;return n})();function y(n,e,s){let t=Math.min(Number(s),Math.max(Number(e),Number(n)));return n instanceof Date?new Date(t):t}function Qt(n){return n.replaceAll(/\W/g,"").length}function Gt(n,{day:e,month:s,year:t}={}){let i=new Date(n);return e&&i.setDate(i.getDate()+e),s&&i.setMonth(i.getMonth()+s),t&&i.setFullYear(i.getFullYear()+t),i}var qt=n=>{var e,s,t,i,r,o;return{day:(s=(e=n.match(/d/g))===null||e===void 0?void 0:e.length)!==null&&s!==void 0?s:0,month:(i=(t=n.match(/m/g))===null||t===void 0?void 0:t.length)!==null&&i!==void 0?i:0,year:(o=(r=n.match(/y/g))===null||r===void 0?void 0:r.length)!==null&&o!==void 0?o:0}};function Jt(n){return{day:String(n.getDate()).padStart(2,"0"),month:String(n.getMonth()+1).padStart(2,"0"),year:String(n.getFullYear()).padStart(4,"0"),hours:String(n.getHours()).padStart(2,"0"),minutes:String(n.getMinutes()).padStart(2,"0"),seconds:String(n.getSeconds()).padStart(2,"0"),milliseconds:String(n.getMilliseconds()).padStart(3,"0")}}function Vn(n,e){let s=Qt(e),[t=""]=new RegExp(`(\\D*\\d){${s}}`).exec(n)||[];return t}function Ie(n,e){return n.length<e.length?!1:n.split(/\D/).every(s=>!/^0+$/.exec(s))}function Q(n,e,s){let t=Qt(e);return n.replace(s,"").match(new RegExp(`(\\D*\\d[^\\d\\s]*){1,${t}}`,"g"))||[]}function q(n,e){let s=e.replaceAll(/[^dmy]/g,""),t=n.replaceAll(/\D+/g,""),i={day:t.slice(s.indexOf("d"),s.lastIndexOf("d")+1),month:t.slice(s.indexOf("m"),s.lastIndexOf("m")+1),year:t.slice(s.indexOf("y"),s.lastIndexOf("y")+1)};return Object.fromEntries(Object.entries(i).filter(([r,o])=>!!o).sort(([r],[o])=>e.toLowerCase().indexOf(r.slice(0,1))>e.toLowerCase().indexOf(o.slice(0,1))?1:-1))}function Ve(n,e){var s,t,i,r,o,l,a;let c=((s=n.year)===null||s===void 0?void 0:s.length)===2?`20${n.year}`:n.year,u=new Date(Number(c??"0"),Number((t=n.month)!==null&&t!==void 0?t:"1")-1,Number((i=n.day)!==null&&i!==void 0?i:"1"),Number((r=e==null?void 0:e.hours)!==null&&r!==void 0?r:"0"),Number((o=e==null?void 0:e.minutes)!==null&&o!==void 0?o:"0"),Number((l=e==null?void 0:e.seconds)!==null&&l!==void 0?l:"0"),Number((a=e==null?void 0:e.milliseconds)!==null&&a!==void 0?a:"0"));return u.setFullYear(Number(c??"0")),u}var en=", ";function L({day:n,month:e,year:s,hours:t,minutes:i,seconds:r,milliseconds:o},{dateMode:l,dateTimeSeparator:a=en,timeMode:c}){var u;let d=((u=l.match(/y/g))===null||u===void 0?void 0:u.length)===2?s==null?void 0:s.slice(-2):s;return(l+(c?a+c:"")).replaceAll(/d+/g,n??"").replaceAll(/m+/g,e??"").replaceAll(/y+/g,d??"").replaceAll(/H+/g,t??"").replaceAll("MSS",o??"").replaceAll(/M+/g,i??"").replaceAll(/S+/g,r??"").replaceAll(/^\D+/g,"").replaceAll(/\D+$/g,"")}var tn={day:31,month:12,year:9999},Fn=[".",",","\u0431","\u044E"],kn=new Date("0001-01-01"),nn=new Date("9999-12-31");var X="\xA0",Ln="\u200B",Ce="\u2013",Fe="\u2014",K="-",Ee="\u2212",ke="\u30FC";var es=new RegExp(`[${X}APM]+$`,"g"),ts=new RegExp(`${X}[AP]M$`,"g"),$n=[":","."];function jn({dateString:n,dateModeTemplate:e,dateSegmentsSeparator:s,offset:t,selection:[i,r]}){let o=q(n,e),l=Object.entries(o),a={};for(let[d,m]of l){let h=L(a,{dateMode:e}),p=tn[d],f=h.length&&s.length,g=t+h.length+f+qt(e)[d],E=g>=i&&g===r;if(E&&Number(m)>Number(p))return{validatedDateString:"",updatedSelection:[i,r]};if(E&&Number(m)<1)return{validatedDateString:"",updatedSelection:[i,r]};a[d]=m}let c=L(a,{dateMode:e}),u=c.length-n.length;return{validatedDateString:c,updatedSelection:[i+u,r+u]}}var sn=/[\\^$.*+?()[\]{}|]/g,zn=new RegExp(sn.source);function C(n){return n&&zn.test(n)?n.replaceAll(sn,String.raw`\$&`):n}function _(n,{prefix:e,postfix:s}){var t,i;let r=new RegExp(`^${C(e)}`),o=new RegExp(`${C(s)}$`),[l=""]=(t=n.match(r))!==null&&t!==void 0?t:[],[a=""]=(i=n.match(o))!==null&&i!==void 0?i:[],c=n.replace(r,"").replace(o,"");return{extractedPrefix:l,extractedPostfix:a,cleanValue:c}}function Hn(n,e){let s="";for(let t=0;t<n.length;t++){if(n[t]!==e[t])return s;s+=n[t]}return s}function $(n){return n}function Oe(n){return!n||typeof n=="object"&&Object.keys(n).length===0}var Un=/^0+$/;function Re(n,e,s=0){let t=n.padEnd(e.length,"0");if(Number(t)<=Number(e))return{validatedSegmentValue:n,prefixedZeroesCount:s};if(t.endsWith("0"))return Re(`0${n.slice(0,e.length-1)}`,e,s+1);let i=n.slice(0,e.length-1);return Un.exec(i)?{validatedSegmentValue:"",prefixedZeroesCount:s}:Re(`${i}0`,e,s)}function Zt(n){return n.replaceAll(/[０-９]/g,e=>String.fromCharCode(e.charCodeAt(0)-65248))}function rn({dateModeTemplate:n,dateSegmentSeparator:e,splitFn:s,uniteFn:t}){return({value:i,selection:r})=>{var o;let[l,a]=r,{dateStrings:c,restPart:u=""}=s(i),d=[],m=0;c.forEach(p=>{let f=q(p,n),E=Object.entries(f).reduce((b,[V,M])=>{let{validatedSegmentValue:w,prefixedZeroesCount:D}=Re(M,`${tn[V]}`);return m+=D,Object.assign(Object.assign({},b),{[V]:w})},{});d.push(L(E,{dateMode:n}))});let h=t(d,i)+(!((o=c[c.length-1])===null||o===void 0)&&o.endsWith(e)?e:"")+u;return m&&h.slice(a+m,a+m+e.length)===e&&(m+=e.length),{selection:[l+m,a+m],value:h}}}function Bn({dateModeTemplate:n,firstDateEndSeparator:e,dateSegmentSeparator:s,pseudoFirstDateEndSeparators:t}){return({elementState:i,data:r})=>{let{value:o,selection:l}=i,[a,c]=l,u=Vn(o,n),d=t.filter(f=>!e.includes(f)&&f!==s),m=new RegExp(`[${d.join("")}]`,"gi"),h=u&&o.length>u.length?u+o.slice(u.length).replace(/^[\D\s]*/,e):o,p=h.length-o.length;return{elementState:{selection:[a+p,c+p],value:h},data:r.replace(m,e)}}}function Le(){return({elementState:n,data:e})=>{let{value:s,selection:t}=n;return{elementState:{selection:t,value:Zt(s)},data:Zt(e)}}}var ns=new RegExp(`[${$n.map(C).join("")}]$`);function Wn(n,e){let s=qt(e);return Object.fromEntries(Object.entries(n).map(([t,i])=>{let r=s[t];return[t,i.length===r&&/^0+$/.exec(i)?"1".padStart(r,"0"):i]}))}function on({dateModeTemplate:n,min:e=kn,max:s=nn,rangeSeparator:t="",dateSegmentSeparator:i="."}){return({value:r,selection:o})=>{let l=t&&r.endsWith(t),a=Q(r,n,t),c="";for(let u of a){c+=c?t:"";let d=q(u,n);if(!Ie(u,n)){let p=Wn(d,n),f=L(p,{dateMode:n}),g=u.endsWith(i)?i:"";c+=f+g;continue}let m=Ve(d),h=y(m,e,s);c+=L(Jt(h),{dateMode:n})}return{selection:o,value:c+(l?t:"")}}}function an({dateModeTemplate:n,dateSegmentsSeparator:e,rangeSeparator:s="",dateTimeSeparator:t=en}){return({elementState:i,data:r})=>{var o;let l=s?new RegExp(`${s}|-`):t,a=r.split(l),c=r.includes(t)?[(o=a[0])!==null&&o!==void 0?o:""]:a;if(c.every(u=>u.trim().split(/\D/).filter(Boolean).length===n.split(e).length)){let u=c.map(d=>Gn(d,n,e)).join(s);return{elementState:i,data:`${u}${r.includes(t)&&t+a[1]||""}`}}return{elementState:i,data:r}}}function Gn(n,e,s){let t=n.split(/\D/).filter(Boolean),i=e.split(s);return t.map((o,l)=>{var a,c;return l===i.length-1?o:o.padStart((c=(a=i[l])===null||a===void 0?void 0:a.length)!==null&&c!==void 0?c:0,"0")}).join(s)}function Zn(n){let e=new RegExp(`${C(n)}$`);return n?({value:s,selection:t},i)=>{if(!s&&!i.value.endsWith(n))return{value:s,selection:t};if(!s.endsWith(n)&&!i.value.endsWith(n))return{selection:t,value:s+n};let r=i.value.replace(e,""),o=i.selection[1]>=r.length,l=Hn(r,s);return{selection:t,value:Array.from(n).reverse().reduce((a,c,u)=>{let d=a.length-1-u,m=l[d]===c&&o;return a[d]!==c||m?a.slice(0,d+1)+c+a.slice(d+1):a},s)}}:$}function Yn(n){return n?({value:e,selection:s},t)=>{if(e.startsWith(n)||!e&&!t.value.startsWith(n))return{value:e,selection:s};let[i,r]=s,o=Array.from(n).reduce((a,c,u)=>a[u]===c?a:a.slice(0,u)+c+a.slice(u),e),l=o.length-e.length;return{selection:[i+l,r+l],value:o}}:$}function ln({dateModeTemplate:n,dateSegmentsSeparator:e,rangeSeparator:s=""}){return({elementState:t,data:i})=>{let{value:r,selection:o}=t;if(i===e)return{elementState:t,data:o[0]===r.length?i:""};let l=i.replaceAll(new RegExp(`[^\\d${C(e)}${s}]`,"g"),"");if(!l)return{elementState:t,data:""};let[a,c]=o,u=c+i.length,d=r.slice(0,a)+l+r.slice(u),m=Q(d,n,s),h="",p=!!s&&d.includes(s);for(let g of m){let{validatedDateString:E,updatedSelection:b}=jn({dateString:g,dateModeTemplate:n,dateSegmentsSeparator:e,offset:h.length,selection:[a,u]});if(g&&!E)return{elementState:t,data:""};u=b[1],h+=p&&!h?E+s:E}let f=h.slice(a,u);return{elementState:{selection:o,value:h.slice(0,a)+f.split(e).map(g=>"0".repeat(g.length)).join(e)+h.slice(u)},data:f}}}function $e(n,e,s){return(t,i)=>{let r=()=>e(t,i);return t.addEventListener(n,r,s),()=>t.removeEventListener(n,r,s)}}function Xn(n){return(e,s)=>{let t=e.ownerDocument,i=0,r=()=>i++,o=()=>{i=Math.max(--i,0)},l=()=>{if(e.matches(":focus")){if(i)return t.addEventListener("mouseup",l,{once:!0,passive:!0});n(e,s)}};return t.addEventListener("selectionchange",l,{passive:!0}),e.addEventListener("mousedown",r,{passive:!0}),t.addEventListener("mouseup",o,{passive:!0}),()=>{t.removeEventListener("selectionchange",l),t.removeEventListener("mousedown",r),t.removeEventListener("mouseup",o)}}}function cn(n){return Xn(e=>{var s,t;let i=(s=e.selectionStart)!==null&&s!==void 0?s:0,r=(t=e.selectionEnd)!==null&&t!==void 0?t:0,[o,l]=n(e.value,[i,r]);(o>i||l<r)&&e.setSelectionRange(y(i,o,l),y(r,o,l))})}function un(){return({elementState:n},e)=>{let{value:s,selection:t}=n;if(!s||Kn(s,t))return{elementState:n};let[i,r]=t,o=s.slice(i,r).replaceAll(/\d/g,"0"),l=s.slice(0,i)+o+s.slice(r);return o.replaceAll(/\D/g,"")?e==="validation"||e==="insert"&&i===r?{elementState:{selection:t,value:l}}:{elementState:{selection:e==="deleteBackward"||e==="insert"?[i,i]:[r,r],value:l}}:{elementState:n}}}function Kn(n,[e,s]){return s===n.length}function is({mode:n,separator:e=".",max:s,min:t}){let i=n.split("/").join(e);return Object.assign(Object.assign({},R),{mask:Array.from(i).map(r=>e.includes(r)?r:/\d/),overwriteMode:"replace",preprocessors:[Le(),un(),an({dateModeTemplate:i,dateSegmentsSeparator:e}),ln({dateModeTemplate:i,dateSegmentsSeparator:e})],postprocessors:[rn({dateModeTemplate:i,dateSegmentSeparator:e,splitFn:r=>({dateStrings:[r]}),uniteFn:([r=""])=>r}),on({min:t,max:s,dateModeTemplate:i,dateSegmentSeparator:e})]})}var Qn=[K,Ce,Fe,Ee,ke];function qn({dateModeTemplate:n,rangeSeparator:e,minLength:s,maxLength:t,max:i=nn}){return Oe(s)&&Oe(t)?$:({value:r,selection:o})=>{let l=Q(r,n,e);if(l.length!==2||l.some(p=>!Ie(p,n)))return{value:r,selection:o};let[a,c]=l.map(p=>Ve(q(p,n)));if(!a||!c)return{value:r,selection:o};let u=Gt(a,Object.assign(Object.assign({},s),{day:(s==null?void 0:s.day)&&s.day-1})),d=Oe(t)?i:Gt(a,Object.assign(Object.assign({},t),{day:(t==null?void 0:t.day)&&t.day-1})),m=y(c,u,i),h=m>d?d:m;return{selection:o,value:l[0]+e+L(Jt(h),{dateMode:n})}}}function Jn({dateModeTemplate:n,rangeSeparator:e}){return({value:s,selection:t})=>{let i=Q(s,n,e),r=i.length===2&&i.every(m=>Ie(m,n)),[o,l]=t,a=o>=s.length,c=o===0&&l>=s.length;if(!(a||c)||!r)return{value:s,selection:t};let[u,d]=i.map(m=>Ve(q(m,n)));return{selection:t,value:u&&d&&u>d?i.reverse().join(e):s}}}function ss({mode:n,min:e,max:s,minLength:t,maxLength:i,dateSeparator:r=".",rangeSeparator:o=`${X}${Ce}${X}`}){let l=n.split("/").join(r),a=Array.from(l).map(c=>r.includes(c)?c:/\d/);return Object.assign(Object.assign({},R),{mask:[...a,...Array.from(o),...a],overwriteMode:"replace",preprocessors:[Le(),Bn({dateModeTemplate:l,dateSegmentSeparator:r,firstDateEndSeparator:o,pseudoFirstDateEndSeparators:Qn}),un(),an({dateModeTemplate:l,rangeSeparator:o,dateSegmentsSeparator:r}),ln({dateModeTemplate:l,rangeSeparator:o,dateSegmentsSeparator:r})],postprocessors:[rn({dateModeTemplate:l,dateSegmentSeparator:r,splitFn:c=>({dateStrings:Q(c,l,o)}),uniteFn:(c,u)=>c.reduce((d,m,h)=>d+m+(!h&&u.includes(o)?o:""),"")}),on({min:e,max:s,dateModeTemplate:l,rangeSeparator:o,dateSegmentSeparator:r}),qn({dateModeTemplate:l,minLength:t,maxLength:i,max:s,rangeSeparator:o}),Jn({dateModeTemplate:l,rangeSeparator:o})]})}function ei({prefix:n,postfix:e}){return({elementState:s,data:t})=>{let{cleanValue:i}=_(t,{prefix:n,postfix:e});return{elementState:s,data:i}}}function dn({decimalSeparator:n,isNegativeAllowed:e,precision:s,thousandSeparator:t,prefix:i,postfix:r,decimalPseudoSeparators:o=[],pseudoMinuses:l=[],minusSign:a}){let c=Yt(i),u=String.raw`\d`,d=e?`[${a}${l.map(g=>`\\${g}`).join("")}]?`:"",m=t?`[${u}${C(t).replaceAll(/\s/g,String.raw`\s`)}]*`:`[${u}]*`,h=Number.isFinite(s)?s:"",p=s>0?`([${C(n)}${o.map(C).join("")}]${u}{0,${h}})?`:"",f=Yt(r);return new RegExp(`^${c}${d}${m}${p}${f}$`)}function Yt(n){return n?`${n.split("").map(e=>`${C(e)}?`).join("")}`:""}function I(n,e="."){let s=!!new RegExp(`^\\D*[${Ee}\\${K}${Ce}${Fe}${ke}]`).exec(n),t=C(e),i=n.replaceAll(new RegExp(`${t}(?!\\d)`,"g"),"").replaceAll(new RegExp(`[^\\d${t}]`,"g"),"").replace(e,".");return i?+`${s?K:""}${i}`:NaN}function ti(n){var e;let s=String(n),[t="",i]=s.split("e-"),r=s;if(i){let[,o]=t.split("."),l=Number(i)+((e=o==null?void 0:o.length)!==null&&e!==void 0?e:0);r=n.toFixed(l)}return r}function mn(n,{decimalSeparator:e,minusSign:s}){let[t="",i=""]=n.split(e),r=C(s),[,o="",l=""]=new RegExp(`^(?:[^\\d${r}])?(${r})?(.*)`).exec(t)||[];return{minus:o,integerPart:l,decimalPart:i}}function ni({decimalSeparator:n,thousandSeparator:e,decimalPseudoSeparators:s=Fn}){return s.filter(t=>t!==e&&t!==n)}function ii({decimalSeparator:n,precision:e,decimalZeroPadding:s,prefix:t,postfix:i}){return e<=0||!s?$:({value:r,selection:o})=>{let{cleanValue:l,extractedPrefix:a,extractedPostfix:c}=_(r,{prefix:t,postfix:i});if(Number.isNaN(I(l,n)))return{value:r,selection:o};let[u,d=""]=l.split(n);return{value:a+u+n+d.padEnd(e,"0")+c,selection:o}}}function si({prefix:n,postfix:e,decimalSeparator:s,minusSign:t}){return({value:i,selection:r})=>{let[o]=r,{cleanValue:l,extractedPrefix:a,extractedPostfix:c}=_(i,{prefix:n,postfix:e}),{minus:u,integerPart:d,decimalPart:m}=mn(l,{decimalSeparator:s,minusSign:t}),h=!d&&!m&&l.includes(s);return!d&&!Number(m)&&o===(u+a).length||h?{selection:r,value:a+u+c}:{value:i,selection:r}}}function ri({decimalSeparator:n,decimalPseudoSeparators:e,pseudoMinuses:s,prefix:t,postfix:i,minusSign:r}){let o=!0,l=dn({decimalSeparator:n,decimalPseudoSeparators:e,pseudoMinuses:s,prefix:"",postfix:"",thousandSeparator:"",precision:1/0,isNegativeAllowed:!0,minusSign:r});return({elementState:a,data:c})=>{if(!o)return{elementState:a,data:c};o=!1;let{value:u,selection:d}=a,[m,h]=d,{extractedPrefix:p,cleanValue:f,extractedPostfix:g}=_(u,{prefix:t,postfix:i}),E=k({selection:[Math.max(m-p.length,0),y(h-p.length,0,f.length)],value:f},{mask:l}),[b,V]=E.selection;return{elementState:{selection:[b+p.length,V+p.length],value:p+E.value+g},data:c}}}function oi({decimalSeparator:n,thousandSeparator:e,prefix:s,postfix:t}){let i=o=>{let l=C(e);return o.replace(new RegExp(`^(\\D+)?[0${l}]+(?=0)`),"$1").replace(new RegExp(`^(\\D+)?[0${l}]+(?=[1-9])`),"$1")},r=(o,l)=>{let a=o.slice(0,l),c=o.slice(l).startsWith("0");return a.length-i(a).length+(c?1:0)};return({value:o,selection:l})=>{let[a,c]=l,{cleanValue:u,extractedPrefix:d,extractedPostfix:m}=_(o,{prefix:s,postfix:t}),h=u.includes(n),[p="",f=""]=u.split(n),g=i(p);if(p===g)return{value:o,selection:l};let E=a-r(o,a),b=c-r(o,c);return{value:d+g+(h?n:"")+f+m,selection:[Math.max(E,0),Math.max(b,0)]}}}function ai({min:n,max:e,decimalSeparator:s,minusSign:t}){return({value:i,selection:r})=>{let o=I(i,s),l=o>0?Math.min(o,e):Math.max(o,n);if(o&&l!==o){let a=`${l}`.replace(".",s).replace(K,t);return{value:a,selection:[a.length,a.length]}}return{value:i,selection:r}}}function li({decimalSeparator:n,thousandSeparator:e,decimalZeroPadding:s}){return({elementState:t,data:i},r)=>{let{value:o,selection:l}=t,[a,c]=l,u=o.slice(a,c),d=s?[n,e]:[e],m=s&&a>o.indexOf(n)&&!!u.match(/^0+$/gi);return r!=="deleteBackward"&&r!=="deleteForward"||!d.includes(u)&&!m?{elementState:t,data:i}:{elementState:{value:o,selection:r==="deleteForward"?[c,c]:[a,a]},data:i}}}function ci({decimalSeparator:n,precision:e,prefix:s,postfix:t}){let i=new RegExp(`^\\D*${C(n)}`);return({elementState:r,data:o})=>{let{value:l,selection:a}=r,{cleanValue:c,extractedPrefix:u}=_(l,{prefix:s,postfix:t}),[d,m]=a,h=y(d-u.length,0,c.length),p=y(m-u.length,0,c.length);if(e<=0||c.slice(0,h).includes(n)||c.slice(p).includes(n)||!o.match(i))return{elementState:r,data:o};let f=/\d+/.exec(c.slice(0,h));return{elementState:r,data:f?o:`0${o}`}}}function Xt({validCharacter:n,pseudoCharacters:e,prefix:s,postfix:t}){let i=new RegExp(`[${e.join("")}]`,"gi");return({elementState:r,data:o})=>{let{value:l,selection:a}=r,{cleanValue:c,extractedPostfix:u,extractedPrefix:d}=_(l,{prefix:s,postfix:t});return{elementState:{selection:a,value:d+c.replace(i,n)+u},data:o.replace(i,n)}}}function ui({decimalSeparator:n,prefix:e,postfix:s}){return({elementState:t,data:i})=>{let{value:r,selection:o}=t,[l,a]=o,{cleanValue:c}=_(r,{prefix:e,postfix:s});return{elementState:t,data:!c.includes(n)||r.slice(l,a+1).includes(n)?i:i.replaceAll(new RegExp(C(n),"gi"),"")}}}function di({thousandSeparator:n,decimalSeparator:e,prefix:s,postfix:t,minusSign:i}){if(!n)return $;let r=(...o)=>o.every(l=>/\s/.test(l));return({value:o,selection:l})=>{let[a,c]=l,[u,d]=l,{cleanValue:m,extractedPostfix:h,extractedPrefix:p}=_(o,{prefix:s,postfix:t}),{minus:f,integerPart:g,decimalPart:E}=mn(m,{decimalSeparator:e,minusSign:i}),b=m.length-(f+g+(m.includes(e)?e+E:"")).length;b>0&&a&&a<=b&&(u-=b),b>0&&c&&c<=b&&(d-=b);let V=Array.from(g).reduceRight((M,w,D)=>{let be=!(!D&&w===n)&&!!M.length&&(M.length+1)%4===0,ze=w===n||r(w,n);return be&&ze?n+M:!be&&ze?(D&&D<=a&&u--,D&&D<=c&&d--,M):be?(D<a&&u++,D<c&&d++,w+n+M):w+M},"");return{value:p+f+V+(m.includes(e)?e:"")+E+h,selection:[u,d]}}}function mi({precision:n,decimalSeparator:e,prefix:s,postfix:t}){if(n>0)return $;let i=new RegExp(`${C(e)}.*$`,"g");return({elementState:r,data:o})=>{let{value:l,selection:a}=r,{cleanValue:c,extractedPrefix:u,extractedPostfix:d}=_(l,{prefix:s,postfix:t}),[m,h]=a,p=u+c.replace(i,"")+d;return{elementState:{selection:[Math.min(m,p.length),Math.min(h,p.length)],value:p},data:o.replace(i,"")}}}var Kt=[0,0];function hi({decimalSeparator:n,thousandSeparator:e,prefix:s,postfix:t}){let i=oi({decimalSeparator:n,thousandSeparator:e,prefix:s,postfix:t});return $e("blur",r=>{let o=i({value:r.value,selection:Kt},{value:"",selection:Kt}).value;ve(r,o)},{capture:!0})}function pi({min:n,max:e,decimalSeparator:s}){return $e("blur",(t,i)=>{let r=I(t.value,s),o=y(r,n,e);!Number.isNaN(r)&&r!==o&&ve(t,k(ti(o),i))},{capture:!0})}function fi({decimalSeparator:n,prefix:e,postfix:s}){return $e("blur",t=>{let{cleanValue:i,extractedPostfix:r,extractedPrefix:o}=_(t.value,{prefix:e,postfix:s}),l=o+i.replace(new RegExp(`^(\\D+)?${C(n)}`),`$10${n}`)+r;ve(t,l)},{capture:!0})}function hn({max:n=Number.MAX_SAFE_INTEGER,min:e=Number.MIN_SAFE_INTEGER,precision:s=0,thousandSeparator:t=X,decimalSeparator:i=".",decimalPseudoSeparators:r,decimalZeroPadding:o=!1,prefix:l="",postfix:a="",minusSign:c=Ee}={}){let u=[K,Ce,Fe,ke,Ee].filter(h=>h!==t&&h!==i&&h!==c),d=ni({decimalSeparator:i,thousandSeparator:t,decimalPseudoSeparators:r}),m=l.endsWith(i)&&s>0?`${l}${Ln}`:l;return Object.assign(Object.assign({},R),{mask:dn({decimalSeparator:i,precision:s,thousandSeparator:t,prefix:m,postfix:a,isNegativeAllowed:e<0,minusSign:c}),preprocessors:[Le(),ri({decimalSeparator:i,decimalPseudoSeparators:d,pseudoMinuses:u,prefix:m,postfix:a,minusSign:c}),ei({prefix:m,postfix:a}),Xt({validCharacter:c,pseudoCharacters:u,prefix:m,postfix:a}),Xt({validCharacter:i,pseudoCharacters:d,prefix:m,postfix:a}),ci({decimalSeparator:i,precision:s,prefix:m,postfix:a}),li({decimalSeparator:i,decimalZeroPadding:o,thousandSeparator:t}),mi({precision:s,decimalSeparator:i,prefix:m,postfix:a}),ui({decimalSeparator:i,prefix:m,postfix:a})],postprocessors:[ai({decimalSeparator:i,min:e,max:n,minusSign:c}),Yn(m),Zn(a),di({decimalSeparator:i,thousandSeparator:t,prefix:m,postfix:a,minusSign:c}),ii({decimalSeparator:i,decimalZeroPadding:o,precision:s,prefix:m,postfix:a}),si({prefix:m,postfix:a,decimalSeparator:i,minusSign:c})],plugins:[hi({decimalSeparator:i,thousandSeparator:t,prefix:m,postfix:a}),fi({decimalSeparator:i,prefix:m,postfix:a}),pi({min:e,max:n,decimalSeparator:i})],overwriteMode:o?({value:h,selection:[p]})=>p<=h.indexOf(i)?"shift":"replace":"shift"})}var gi=["*",[["input"]],[["tuiContent"]]],vi=["*","input","tuiContent"];function Ei(n,e){if(n&1&&(Xe(0),re(1),Ke()),n&2){let s=e.polymorpheusOutlet;S(),tt(" ",s," ")}}function Ci(n,e){if(n&1&&(H(0,"div",6),z(1,Ei,2,1,"ng-container",7),U()),n&2){O();let s=Se(9);S(),P("polymorpheusOutlet",s)}}function bi(n,e){if(n&1){let s=Ae();H(0,"section",8)(1,"button",9),B("click.prevent",function(){T(s);let i=O();return N(i.onArrow(i.step))})("mousedown.prevent",function(){T(s);let i=O();return N(i.nativeFocusableElement==null?null:i.nativeFocusableElement.focus())}),re(2," + "),U(),H(3,"button",9),B("click.prevent",function(){T(s);let i=O();return N(i.onArrow(-i.step))})("mousedown.prevent",function(){T(s);let i=O();return N(i.nativeFocusableElement==null?null:i.nativeFocusableElement.focus())}),re(4," - "),U()()}if(n&2){let s=O(),t=Se(1);S(),P("appearance",t.appearance)("disabled",!s.canIncrement)("iconStart",s.icons.up),S(2),P("appearance",t.appearance)("disabled",!s.canDecrement)("iconStart",s.icons.down)}}function xi(n,e){n&1&&Qe(0)}function _i(n,e){n&1&&se(0,2)}var pn={icons:{up:"@tui.plus",down:"@tui.minus"},min:Number.MIN_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,step:0},fn=Pe(pn);function ks(n){return ht(fn,n,pn)}var Ai=18,Di=Pe(),Ls=(()=>{let e=class e extends Pt{constructor(){super(...arguments),this.isIOS=v(xt),this.textfieldSize=v(Tt),this.options=v(fn),this.unfinishedValue="",this.polymorpheusValueContent=ft,this.valueTransformer=v(Di,{optional:!0}),this.numberFormat=ce,this.controller=v(Ot),this.numberFormat$=v(Et).pipe(vt(this.cdr),dt()).subscribe(t=>{this.numberFormat=t}),this.min=this.options.min,this.max=this.options.max,this.step=this.options.step}get nativeFocusableElement(){return!this.textfield||this.computedDisabled?null:this.textfield.nativeFocusableElement}get focused(){var t;return!!((t=this.textfield)!=null&&t.focused)}get inputMode(){return this.isIOS&&this.isNegativeAllowed?"text":this.precision?"decimal":"numeric"}get calculatedMaxLength(){let i=!!this.precision&&this.nativeValue.includes(this.numberFormat.decimalSeparator)?Math.min(this.precision+1,20):0,r=this.numberFormat.thousandSeparator.repeat(5).length;return Ai+i+r}get computedValue(){return this.focused?this.nativeValue:this.formattedValue}onValueChange(t){let i=I(t,this.numberFormat.decimalSeparator);if(this.unfinishedValue=null,Number.isNaN(i)){this.value=null;return}if(this.isNativeValueNotFinished){this.unfinishedValue=t,this.cdr.markForCheck();return}i<this.computedMin||i>this.computedMax||(this.value=i)}writeValue(t){super.writeValue(t),this.nativeValue=this.formattedValue}get size(){return this.textfieldSize.size}get icons(){return this.options.icons}get computedMin(){return this.computeMin(this.min,this.max)}get computedMax(){return this.computeMax(this.min,this.max)}get isNegativeAllowed(){return this.computedMin<0}get formattedValue(){return this.value!==null?this.getFormattedValue(this.value||0):""}get canDecrement(){return this.interactive&&(this.value||0)>this.computedMin}get canIncrement(){return this.interactive&&(this.value||0)<this.computedMax}get computedPrefix(){return this.controller.prefix}get computedPostfix(){let t=this.controller.postfix;return t&&` ${t}`}get mask(){return this.calculateMask(this.precision,this.numberFormat.decimalMode,this.numberFormat.decimalSeparator,this.numberFormat.thousandSeparator,this.computedMin,this.computedMax,this.computedPrefix,this.computedPostfix)}get nativeValue(){var t;return((t=this.nativeFocusableElement)==null?void 0:t.value)||""}set nativeValue(t){!this.textfield||!this.nativeFocusableElement||(this.textfield.value=t,this.nativeFocusableElement.value=t)}onArrow(t){t&&(this.value=oe((this.value||0)+t,this.computedMin,this.computedMax),this.nativeValue=this.formattedValue)}onFocused(t){this.updateFocused(t);let i=this.unfinishedValue?I(this.unfinishedValue,this.numberFormat.decimalSeparator):this.nativeNumberValue;if(this.unfinishedValue=null,Number.isNaN(i)){this.nativeValue=t&&!this.readOnly?this.computedPrefix+this.computedPostfix:"",this.value=null;return}t||(this.value=i,this.nativeValue=this.formattedValue)}getFormattedValue(t){return this.computedPrefix+Lt(t,j(F({},this.numberFormat),{precision:this.precision})).replace(le,gt)+this.computedPostfix}get isNativeValueNotFinished(){let t=this.nativeNumberValue;return t<0?t>this.computedMax:t<this.computedMin}get nativeNumberValue(){return I(this.nativeValue,this.numberFormat.decimalSeparator)}get precision(){return Number.isNaN(this.numberFormat.precision)?2:this.numberFormat.precision}computeMin(t,i){var r,o;return Math.min(((r=this.valueTransformer)==null?void 0:r.fromControlValue(t))??t??this.options.min,((o=this.valueTransformer)==null?void 0:o.fromControlValue(i))??i??this.options.max)}computeMax(t,i){var r,o;return Math.max(((r=this.valueTransformer)==null?void 0:r.fromControlValue(t))??t??this.options.min,((o=this.valueTransformer)==null?void 0:o.fromControlValue(i))??i??this.options.max)}calculateMask(t,i,r,o,l,a,c,u){let p=hn({decimalSeparator:r,thousandSeparator:o,min:l,max:a,prefix:c,postfix:u,precision:t,decimalZeroPadding:i==="always"}),{plugins:m}=p,h=He(p,["plugins"]);return j(F({},h),{plugins:[...m,cn(f=>[c.length,f.length-u.length])]})}};e.\u0275fac=(()=>{let t;return function(r){return(t||(t=xe(e)))(r||e)}})(),e.\u0275cmp=ee({type:e,selectors:[["tui-input-number"]],contentQueries:function(i,r,o){if(i&1&&Je(o,ue,5),i&2){let l;De(l=Me())&&(r.polymorpheusValueContent=l)}},viewQuery:function(i,r){if(i&1&&et(de,5),i&2){let o;De(o=Me())&&(r.textfield=o.first)}},hostVars:1,hostBindings:function(i,r){i&1&&B("keydown.arrowDown",function(){return r.onArrow(-r.step)})("keydown.arrowUp",function(){return r.onArrow(r.step)}),i&2&&ie("data-size",r.size)},inputs:{min:"min",max:"max",step:"step"},features:[W([At(e),Mt(e),Rt]),_e],ngContentSelectors:vi,decls:10,vars:14,consts:[["textfield",""],["valueContent",""],["tuiTextfieldPostfix","","tuiTextfieldPrefix","","tuiValueAccessor","",1,"t-textfield",3,"focusedChange","valueChange","disabled","focusable","invalid","maskito","pseudoActive","pseudoFocus","pseudoHover","readOnly","value"],["ngProjectAs","tuiContent","class","t-value-content",5,["tuiContent"],4,"ngIf"],["class","t-buttons",4,"ngIf"],[4,"ngIf"],["ngProjectAs","tuiContent",5,["tuiContent"],1,"t-value-content"],[4,"polymorpheusOutlet"],[1,"t-buttons"],["size","s","tabindex","-1","tuiIconButton","","type","button",1,"t-button",3,"click.prevent","mousedown.prevent","appearance","disabled","iconStart"]],template:function(i,r){if(i&1){let o=Ae();qe(gi),H(0,"tui-primitive-textfield",2,0),B("focusedChange",function(a){return T(o),N(r.onFocused(a))})("valueChange",function(a){return T(o),N(r.onValueChange(a))}),se(2),se(3,1,["ngProjectAs","input",5,["input"]]),z(4,Ci,2,1,"div",3),U(),z(5,bi,5,6,"section",4)(6,xi,1,0,"ng-container",5),it(7,"async"),z(8,_i,1,0,"ng-template",null,1,rt)}i&2&&(P("disabled",r.computedDisabled)("focusable",r.focusable)("invalid",r.computedInvalid)("maskito",r.mask)("pseudoActive",r.pseudoActive)("pseudoFocus",r.computedFocused)("pseudoHover",r.pseudoHover)("readOnly",r.readOnly)("value",r.computedValue),S(4),P("ngIf",r.polymorpheusValueContent.length),S(),P("ngIf",r.step),S(),P("ngIf",st(7,12,r.polymorpheusValueContent.changes)))},dependencies:[ot,Wt,de,Ft,wt,yt,ue,It,bt,at],styles:["[_nghost-%COMP%]{display:flex;border-radius:var(--tui-radius-m);text-align:start}[_nghost-%COMP%]   *:disabled[_nghost-%COMP%], *:disabled   [_nghost-%COMP%]{pointer-events:none}.t-textfield[_ngcontent-%COMP%]{flex:1;min-inline-size:0;max-inline-size:100%;border-radius:inherit;text-align:inherit}.t-textfield[_ngcontent-%COMP%]:not(:last-child){border-start-end-radius:0;border-end-end-radius:0}.t-value-content[_ngcontent-%COMP%]{inline-size:100%}.t-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;margin-left:.125rem;border-radius:inherit}[data-size=s][_ngcontent-%COMP%] + .t-buttons[_ngcontent-%COMP%]{flex-direction:row-reverse}[data-size=s][_ngcontent-%COMP%] + .t-buttons[_ngcontent-%COMP%]   .t-button[_ngcontent-%COMP%]:first-child{margin:0 0 0 .125rem;border-start-end-radius:inherit;border-end-end-radius:inherit}[data-size=s][_ngcontent-%COMP%] + .t-buttons[_ngcontent-%COMP%]   .t-button[_ngcontent-%COMP%]:last-child{border-radius:0}[data-size=m][_ngcontent-%COMP%] + .t-buttons[_ngcontent-%COMP%]   .t-button[_ngcontent-%COMP%]{inline-size:calc(var(--tui-height-m) * .75)}[data-size=l][_ngcontent-%COMP%] + .t-buttons[_ngcontent-%COMP%]   .t-button[_ngcontent-%COMP%]{inline-size:calc(var(--tui-height-l) * .75)}.t-buttons[_ngcontent-%COMP%]   .t-button[_ngcontent-%COMP%]{display:flex;flex:1;block-size:auto;align-items:center;justify-content:center;border-radius:0}.t-buttons[_ngcontent-%COMP%]   .t-button[_ngcontent-%COMP%]:first-child{margin-bottom:.125rem;border-start-end-radius:inherit}.t-buttons[_ngcontent-%COMP%]   .t-button[_ngcontent-%COMP%]:last-child{border-end-end-radius:inherit}"],changeDetection:0});let n=e;return J([ae],n.prototype,"computeMin",null),J([ae],n.prototype,"computeMax",null),J([ae],n.prototype,"calculateMask",null),n})(),$s=(()=>{let e=class e extends St{get value(){return this.host.computedValue}onValueChange(t){this.host.onValueChange(t)}ngDoCheck(){this.host.nativeFocusableElement&&(this.host.nativeFocusableElement.inputMode=this.host.inputMode,this.host.nativeFocusableElement.maxLength=this.host.nativeFocusableElement.maxLength>0?this.host.nativeFocusableElement.maxLength:this.host.calculatedMaxLength)}};e.\u0275fac=(()=>{let t;return function(r){return(t||(t=xe(e)))(r||e)}})(),e.\u0275dir=A({type:e,selectors:[["tui-input-number"]],features:[W([Dt(e)]),_e]});let n=e;return n})(),js=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=We({type:e}),e.\u0275inj=Be({imports:[lt,kt,Nt,Vt]});let n=e;return n})();var je=class{constructor(e){this.internalDirectiveInstance=e}get $implicit(){return this.internalDirectiveInstance.tuiLet}get tuiLet(){return this.internalDirectiveInstance.tuiLet}},Gs=(()=>{let e=class e{constructor(){v(ne).createEmbeddedView(v(te),new je(this))}static ngTemplateContextGuard(t,i){return!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=A({type:e,selectors:[["","tuiLet",""]],inputs:{tuiLet:"tuiLet"},standalone:!0});let n=e;return n})();export{Lt as a,Ti as b,Gs as c,ki as d,R as e,Wt as f,is as g,ss as h,hn as i,Qi as j,ks as k,Ls as l,$s as m,js as n};
