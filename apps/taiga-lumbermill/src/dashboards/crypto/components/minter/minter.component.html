@let token = minterForm.controls[0].value;
@let symbol = minterForm.controls[1].value;
@let amount = minterForm.controls[2].value;
@let description = minterForm.controls[3].value;
<div
    tuiAppearance="whiteblock"
    tuiCardLarge="normal"
    class="card"
>
    <header tuiHeader>
        <h2
            tuiTitle
            [style.text-align]="'center'"
        >
            {{ !success ? 'Mint your token' : token + ' successfully created' }}
        </h2>
    </header>
    @if (!success) {
        <div class="info">
            <div tuiCell="l">
                <tui-avatar
                    size="xl"
                    [src]="!openIcon && urlIcon !== '' ? urlIcon : '@tui.pencil'"
                    (click)="showDialog()"
                />
                <div tuiTitle>
                    {{ token == '' ? 'Jetton Name' : token }} ({{ symbol == '' ? 'Symbol' : symbol }})
                    <div tuiSubtitle>{{ description == '' ? 'Description' : description }}</div>
                </div>
            </div>
        </div>
        @for (control of minterForm['controls']; track $index) {
            <div class="block-input">
                @if (minterService[$index].type === 'text') {
                    <tui-input [formControl]="control">
                        {{ minterService[$index].title }}
                        <input tuiTextfieldLegacy />
                    </tui-input>
                } @else {
                    <tui-input-number [formControl]="control">
                        {{ minterService[$index].title }}
                        <input tuiTextfieldLegacy />
                    </tui-input-number>
                }
                <div
                    tuiSubtitle
                    [style.padding-left]="'0.4rem'"
                >
                    {{ minterService[$index].description }}
                </div>
            </div>
        }
        <button
            tuiButton
            (click)="deploy()"
        >
            Deploy
        </button>
    } @else {
        <tui-avatar
            size="xl"
            class="logo"
            [src]="urlIcon"
        />
        <h3
            tuiTitle
            class="info"
        >
            {{ amount }} ${{ symbol }} have been sent to your wallet
        </h3>
        <button
            tuiButton
            (click)="success = false"
        >
            Create new Token
        </button>
    }
</div>
<ng-template
    let-observer
    [tuiDialogOptions]="{label: 'Edit logo', size: 's'}"
    [(tuiDialog)]="openIcon"
>
    <p>URL of 256x256 pixel PNG image of token logo</p>
    <tui-input
        tuiAutoFocus
        [(ngModel)]="urlIcon"
    >
        Logo token
    </tui-input>
    <p>
        <button
            tuiButton
            type="submit"
            (click)="observer.complete()"
        >
            Submit
        </button>
    </p>
</ng-template>

<ng-template
    let-observer
    [tuiDialogOptions]="{label: 'You need upload logo token', size: 's'}"
    [(tuiDialog)]="warningIcon"
>
    <p>Click on the pencil next to the token name to download the picture url</p>
    <p>
        <button
            tuiButton
            type="submit"
            (click)="observer.complete()"
        >
            Ok
        </button>
    </p>
</ng-template>
