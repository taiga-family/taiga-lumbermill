import{A as Se,H as Pe,I as we,J as Te,L as Me,M as Ne,N as Oe,P as Re,Q as Ie,T as at,U as Fe,W as Ve,r as _e,v as De,x as Ae,z as ye}from"./chunk-67V4JFHO.js";import{G as Ce,o as rt}from"./chunk-6ZJXXXJJ.js";import{$e as ge,Ad as nt,Bb as H,Be as st,Bf as Ee,Ca as q,Cb as z,Ce as fe,Cf as be,Da as Ht,Dd as le,Ea as y,Eb as Zt,Fa as gt,Fb as Yt,Fd as ue,Gb as Xt,Hb as bt,Ja as zt,Jf as xe,Ka as T,Kb as U,Kd as ce,La as M,Lb as N,Mb as Kt,Na as vt,Nb as tt,Nc as se,Ob as Qt,Pb as qt,Pc as oe,Pd as de,Qb as Ct,Rb as xt,Sb as _t,Ta as Ut,Tb as et,Tc as re,Ud as he,Va as Bt,Vb as Jt,Vd as it,Xd as me,a as I,b as $,bc as B,c as kt,cb as S,cc as te,e as Lt,ed as ae,fb as Wt,jc as ee,kb as Gt,kc as ne,mb as Et,pc as ie,ra as $t,rb as j,sb as J,se as pe,sf as ot,t as Q,ta as jt,tb as P,tf as ve,wa as C}from"./chunk-KLOL2DGG.js";function fn(n){let t=String(n),[s,e]=t.split("e-"),i=t;if(e){let[,o=""]=(s==null?void 0:s.split("."))??[],r=Number(e)+((o==null?void 0:o.length)||0);i=n.toFixed(r)}return i}function gn(n,t){let[,s=""]=fn(n).split(".");return de(t)?s.slice(0,Math.max(0,t)):s}function ke(n,t={}){let{precision:s,decimalSeparator:e,thousandSeparator:i,decimalMode:o,rounding:r}=I($(I({},ot),{decimalMode:"always",precision:1/0}),t),l=Number.isFinite(s)?le({value:n,precision:s,method:r}):n,a=String(Math.floor(Math.abs(l))),u=gn(l,s),c=Number(u)>0;if(Number.isFinite(s))if(o==="always"||c&&o==="pad"){let p=Math.max(s-u.length,0),f="0".repeat(p);u=`${u}${f}`}else u=u.replace(/0*$/,"");let d=a.length%3,m=(n<0?st:"")+a.charAt(0);for(let p=1;p<a.length;p++)p%3===d&&a.length>3&&(m+=i),m+=a.charAt(p);return u?m+e+u:m}function Pi(n){if(n==="")return"";let t=0;for(let o=0;o<n.length;o++)t=n.charCodeAt(o)+((t<<5)-t),t&=t;let s=t%360,e=60+t%5,i=80+t%5;return`hsl(${s},${e}%,${i}%)`}var Mi=(()=>{let t=class t{transform(e,i,...o){return i(e,...o)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275pipe=gt({name:"tuiMapper",type:t,pure:!0,standalone:!0});let n=t;return n})();var vn=65536,Dt=class{constructor(t){this.$implicit=t}},Vi=(()=>{let t=class t{constructor(){this.viewContainer=C(Gt),this.templateRef=C(Wt)}set tuiRepeatTimesOf(e){let i=Math.floor(nt(e,0,vn)),{length:o}=this.viewContainer;e<o?this.removeContainers(o-e):this.addContainers(i)}addContainers(e){for(let i=this.viewContainer.length;i<e;i++)this.viewContainer.createEmbeddedView(this.templateRef,new Dt(i))}removeContainers(e){for(let i=0;i<e;i++)this.viewContainer.remove()}};t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=y({type:t,selectors:[["","tuiRepeatTimes","","tuiRepeatTimesOf",""]],inputs:{tuiRepeatTimesOf:"tuiRepeatTimesOf"},standalone:!0});let n=t;return n})();function Le(n){let{anchorOffset:t=0,focusOffset:s=0}=n.ownerDocument.getSelection()||{},e=Math.min(t,s),i=Math.max(t,s);return[e,i]}function En(n,[t,s]){var e,i;let o=n.ownerDocument,r=o.createRange();r.setStart(n.firstChild||n,Math.min(t,((e=n.textContent)===null||e===void 0?void 0:e.length)||0)),r.setEnd(n.lastChild||n,Math.min(s,((i=n.textContent)===null||i===void 0?void 0:i.length)||0));let l=o.getSelection();l&&(l.removeAllRanges(),l.addRange(r))}var At=class{constructor(t){this.element=t,this.maxLength=1/0}get value(){return this.element.innerText.replace(/\n\n$/,`
`)}set value(t){this.element.innerHTML=t.replace(/\n$/,`

`)}get selectionStart(){return Le(this.element)[0]}get selectionEnd(){return Le(this.element)[1]}setSelectionRange(t,s){En(this.element,[t||0,s||0])}select(){this.setSelectionRange(0,this.value.length)}};function bn(n){let t=new At(n);return new Proxy(n,{get(s,e){if(e in t)return t[e];let i=s[e];return typeof i=="function"?i.bind(s):i},set(s,e,i,o){return Reflect.set(e in t?t:s,e,i,o)}})}var ze=n=>n.isContentEditable?bn(n):n.querySelector("input,textarea")||n,O={mask:/^.*$/,preprocessors:[],postprocessors:[],plugins:[],overwriteMode:"shift"},yt=class{constructor(){this.now=null,this.past=[],this.future=[]}undo(){let t=this.past.pop();t&&this.now&&(this.future.push(this.now),this.updateElement(t,"historyUndo"))}redo(){let t=this.future.pop();t&&this.now&&(this.past.push(this.now),this.updateElement(t,"historyRedo"))}updateHistory(t){if(!this.now){this.now=t;return}let s=this.now.value!==t.value,e=this.now.selection.some((i,o)=>i!==t.selection[o]);!s&&!e||(s&&(this.past.push(this.now),this.future=[]),this.now=t)}updateElement(t,s){this.now=t,this.updateElementState(t,{inputType:s,data:null})}};function Cn(n,...t){return t.every(({value:s})=>s===n.value)}function xn(n,...t){return t.every(({value:s,selection:e})=>s===n.value&&e[0]===n.selection[0]&&e[1]===n.selection[1])}function _n({value:n,selection:t},s,e){let[i,o]=t,r=typeof e=="function"?e({value:n,selection:t}):e;return{value:n,selection:r==="replace"?[i,i+s.length]:[i,o]}}function ht(n){return typeof n=="string"}function $e(n,t,s,e){let i="";for(let o=t.length;o<n.length;o++){let r=n[o]||"",l=(e==null?void 0:e.value[o])===r;if(!ht(r)||r===s&&!l)return i;i+=r}return i}function Ue(n,t){return Array.isArray(t)?n.length===t.length&&Array.from(n).every((s,e)=>{let i=t[e]||"";return ht(i)?s===i:s.match(i)}):t.test(n)}function Dn(n,t,s){let e=null,i=null,o=Array.from(n.value).reduce((l,a,u)=>{let c=$e(t,l,a,s),d=l+c,h=t[d.length]||"";return ht(h)?d+h:a.match(h)?(e===null&&u>=n.selection[0]&&(e=d.length),i===null&&u>=n.selection[1]&&(i=d.length),d+a):d},""),r=$e(t,o,"",s);return{value:Ue(o+r,t)?o+r:o,selection:[e??o.length,i??o.length]}}function An({value:n,selection:t},s){let[e,i]=t,o=e,r=i;return{value:Array.from(n).reduce((a,u,c)=>{let d=a+u;return e===c&&(o=a.length),i===c&&(r=a.length),d.match(s)?d:a},""),selection:[o,r]}}function ut(n,t,s=null){if(Ue(n.value,t))return n;let{value:e,selection:i}=Array.isArray(t)?Dn(n,t,s):An(n,t);return{selection:i,value:Array.isArray(t)?e.slice(0,t.length):e}}function je(n,t){if(!Array.isArray(t))return n;let[s,e]=n.selection,i=[],o=Array.from(n.value).reduce((r,l,a)=>{let u=t[a]||"";return a===s&&i.push(r.length),a===e&&i.push(r.length),ht(u)&&u===l?r:r+l},"");return i.length<2&&i.push(...new Array(2-i.length).fill(o.length)),{value:o,selection:[i[0],i[1]]}}var Z=class{constructor(t,s){this.initialElementState=t,this.maskOptions=s,this.value="",this.selection=[0,0];let{value:e,selection:i}=ut(this.initialElementState,this.getMaskExpression(this.initialElementState));this.value=e,this.selection=i}addCharacters([t,s],e){let{value:i,maskOptions:o}=this,r=this.getMaskExpression({value:i.slice(0,t)+e+i.slice(s),selection:[t+e.length,t+e.length]}),l={value:i,selection:[t,s]},a=je(l,r),[u,c]=_n(a,e,o.overwriteMode).selection,d=a.value.slice(0,u)+e,h=d.length,m=ut({value:d+a.value.slice(c),selection:[h,h]},r,l);if(i.slice(0,u)===ut({value:d,selection:[h,h]},r,l).value||xn(this,m))throw new Error("Invalid mask value");this.value=m.value,this.selection=m.selection}deleteCharacters([t,s]){if(t===s||!s)return;let{value:e}=this,i=this.getMaskExpression({value:e.slice(0,t)+e.slice(s),selection:[t,t]}),o={value:e,selection:[t,s]},r=je(o,i),[l,a]=r.selection,u=r.value.slice(0,l)+r.value.slice(a),c=ut({value:u,selection:[l,l]},i,o);this.value=c.value,this.selection=c.selection}getMaskExpression(t){let{mask:s}=this.maskOptions;return typeof s=="function"?s(t):s}},St=class{constructor(t){this.element=t,this.listeners=[]}listen(t,s,e){let i=s;this.element.addEventListener(t,i,e),this.listeners.push(()=>this.element.removeEventListener(t,i))}destroy(){this.listeners.forEach(t=>t())}},_={CTRL:1,ALT:2,SHIFT:4,META:8},W={Y:89,Z:90};function G(n,t,s){return n.ctrlKey===!!(t&_.CTRL)&&n.altKey===!!(t&_.ALT)&&n.shiftKey===!!(t&_.SHIFT)&&n.metaKey===!!(t&_.META)&&n.keyCode===s}function yn(n){return G(n,_.CTRL,W.Y)||G(n,_.CTRL|_.SHIFT,W.Z)||G(n,_.META|_.SHIFT,W.Z)}function Sn(n){return G(n,_.CTRL,W.Z)||G(n,_.META,W.Z)}function mt(n,t){var s;let e=n.value;if(typeof t=="string")n.value=t;else{let[i,o]=t.selection;n.value=t.value,n.matches(":focus")&&((s=n.setSelectionRange)===null||s===void 0||s.call(n,i,o))}n.value!==e&&n.dispatchEvent(new Event("input",{bubbles:!0}))}function Pn({value:n,selection:t},s){let[e,i]=t;if(e!==i)return[e,i];let o=s?n.slice(e).indexOf(`
`)+1||n.length:n.slice(0,i).lastIndexOf(`
`)+1;return[s?e:o,s?o:i]}function wn({value:n,selection:t},s){let[e,i]=t;return e!==i?[e,i]:(s?[e,i+1]:[e-1,i]).map(r=>Math.min(Math.max(r,0),n.length))}var Tn=/\s+$/g,Mn=/^\s+/g,He=/\s/;function Nn({value:n,selection:t},s){let[e,i]=t;if(e!==i)return[e,i];if(s){let a=n.slice(e),[u]=a.match(Mn)||[""],c=a.trimStart().search(He);return[e,c!==-1?e+u.length+c:n.length]}let o=n.slice(0,i),[r]=o.match(Tn)||[""],l=o.trimEnd().split("").reverse().findIndex(a=>a.match(He));return[l!==-1?i-r.length-l:0,i]}function ct(n=[]){return(t,...s)=>n.reduce((e,i)=>Object.assign(Object.assign({},e),i(e,...s)),t)}function F(n,t){let s=Object.assign(Object.assign({},O),t),e=ct(s.preprocessors),i=ct(s.postprocessors),o=typeof n=="string"?{value:n,selection:[0,0]}:n,{elementState:r}=e({elementState:o,data:""},"validation"),l=new Z(r,s),{value:a,selection:u}=i(l,o);return typeof n=="string"?a:{value:a,selection:u}}var dt=class extends yt{constructor(t,s){super(),this.element=t,this.maskitoOptions=s,this.isTextArea=this.element.nodeName==="TEXTAREA",this.eventListener=new St(this.element),this.options=Object.assign(Object.assign({},O),this.maskitoOptions),this.preprocessor=ct(this.options.preprocessors),this.postprocessor=ct(this.options.postprocessors),this.teardowns=this.options.plugins.map(e=>e(this.element,this.options)),this.updateHistory(this.elementState),this.eventListener.listen("keydown",e=>{if(yn(e))return e.preventDefault(),this.redo();if(Sn(e))return e.preventDefault(),this.undo()}),this.eventListener.listen("beforeinput",e=>{var i;let o=e.inputType.includes("Forward");switch(this.updateHistory(this.elementState),e.inputType){case"historyUndo":return e.preventDefault(),this.undo();case"historyRedo":return e.preventDefault(),this.redo();case"deleteByCut":case"deleteContentBackward":case"deleteContentForward":return this.handleDelete({event:e,isForward:o,selection:wn(this.elementState,o)});case"deleteWordForward":case"deleteWordBackward":return this.handleDelete({event:e,isForward:o,selection:Nn(this.elementState,o),force:!0});case"deleteSoftLineBackward":case"deleteSoftLineForward":case"deleteHardLineBackward":case"deleteHardLineForward":return this.handleDelete({event:e,isForward:o,selection:Pn(this.elementState,o),force:!0});case"insertCompositionText":return;case"insertReplacementText":return;case"insertLineBreak":case"insertParagraph":return this.handleEnter(e);case"insertFromPaste":case"insertText":case"insertFromDrop":default:return this.handleInsert(e,e.data||((i=e.dataTransfer)===null||i===void 0?void 0:i.getData("text/plain"))||"")}}),this.eventListener.listen("input",({inputType:e})=>{e!=="insertCompositionText"&&(this.ensureValueFitsMask(),this.updateHistory(this.elementState))}),this.eventListener.listen("compositionend",()=>{this.ensureValueFitsMask(),this.updateHistory(this.elementState)})}get elementState(){let{value:t,selectionStart:s,selectionEnd:e}=this.element;return{value:t,selection:[s||0,e||0]}}get maxLength(){let{maxLength:t}=this.element;return t===-1?1/0:t}destroy(){this.eventListener.destroy(),this.teardowns.forEach(t=>t==null?void 0:t())}updateElementState({value:t,selection:s},e={inputType:"insertText",data:null}){let i=this.elementState.value;this.updateValue(t),this.updateSelectionRange(s),i!==t&&this.dispatchInputEvent(e)}updateSelectionRange([t,s]){var e;let{element:i}=this;i.matches(":focus")&&(i.selectionStart!==t||i.selectionEnd!==s)&&((e=i.setSelectionRange)===null||e===void 0||e.call(i,t,s))}updateValue(t){this.element.value=t}ensureValueFitsMask(){this.updateElementState(F(this.elementState,this.options))}dispatchInputEvent(t={inputType:"insertText",data:null}){globalThis.InputEvent&&this.element.dispatchEvent(new InputEvent("input",Object.assign(Object.assign({},t),{bubbles:!0,cancelable:!1})))}handleDelete({event:t,selection:s,isForward:e,force:i=!1}){let o={value:this.elementState.value,selection:s},[r,l]=o.selection,{elementState:a}=this.preprocessor({elementState:o,data:""},e?"deleteForward":"deleteBackward"),u=new Z(a,this.options),[c,d]=a.selection;u.deleteCharacters([c,d]);let h=this.postprocessor(u,o);if(!(o.value.slice(0,r)+o.value.slice(l)===h.value&&!i&&!this.element.isContentEditable)){if(t.preventDefault(),Cn(o,a,u,h))return this.updateSelectionRange(e?[d,d]:[c,c]);this.updateElementState(h,{inputType:t.inputType,data:null}),this.updateHistory(h)}}handleInsert(t,s){let e=this.elementState,{elementState:i,data:o=s}=this.preprocessor({data:s,elementState:e},"insert"),r=new Z(i,this.options);try{r.addCharacters(i.selection,o)}catch{return t.preventDefault()}let[l,a]=i.selection,u=e.value.slice(0,l)+s+e.value.slice(a),c=this.postprocessor(r,e);if(c.value.length>this.maxLength)return t.preventDefault();(u!==c.value||this.element.isContentEditable)&&(t.preventDefault(),this.updateElementState(c,{data:s,inputType:t.inputType}),this.updateHistory(c))}handleEnter(t){(this.isTextArea||this.element.isContentEditable)&&this.handleInsert(t,`
`)}};var Be=(()=>{let t=class t{constructor(){this.elementRef=C(Bt).nativeElement,this.ngZone=C(Ut),this.maskedElement=null,this.options=null,this.elementPredicate=ze;let e=C(ae,{self:!0,optional:!0});if(e){let i=e.writeValue.bind(e);e.writeValue=o=>{i(this.options?F(String(o??""),this.options):o)}}}ngOnChanges(){return Lt(this,null,function*(){let{elementPredicate:e,options:i,maskedElement:o,elementRef:r,ngZone:l}=this;if(o==null||o.destroy(),!i)return;let a=yield e(r);this.elementPredicate===e&&l.runOutsideAngular(()=>{this.maskedElement=new dt(a,i)})})}ngOnDestroy(){var e;(e=this.maskedElement)==null||e.destroy()}};t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=y({type:t,selectors:[["","maskito",""]],inputs:{options:[0,"maskito","options"],elementPredicate:[0,"maskitoElement","elementPredicate"]},standalone:!0,features:[zt]});let n=t;return n})();var Rn=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=q({type:t,selectors:[["ng-component"]],hostAttrs:[1,"tui-cell"],standalone:!0,features:[te],decls:0,vars:0,template:function(i,o){},styles:[`[tuiCell]{--tui-height: calc(var(--tui-height-s) - .5rem);--t-padding: .125rem 1rem;-webkit-appearance:none;appearance:none;padding:0;border:0;background:none;font-size:inherit;line-height:inherit;text-decoration:none;position:relative;display:flex;align-items:center;box-sizing:content-box;isolation:isolate;color:var(--tui-text-primary);padding:var(--t-padding);min-height:var(--t-height)}[tuiCell]:disabled{pointer-events:none}[tuiCell] [tuiAccessories]{position:relative;display:flex;max-height:var(--t-height);align-items:center;align-self:stretch}[tuiCell] [tuiCellActions]{position:absolute;right:0;z-index:1;padding-right:inherit}[tuiCell] [tuiCellActions]~*{transition-property:opacity;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}[tuiCell] [tuiCellActions] button,[tuiCell] [tuiCellActions] a{transition-property:opacity;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;opacity:0}[tuiCell] [tuiCellActions] button:focus-visible,[tuiCell] [tuiCellActions] a:focus-visible{opacity:1}[tuiCell] [tuiSubtitle]{display:flex;align-items:center;gap:.25rem;color:var(--tui-text-secondary)}[tuiCell] [tuiTitle]{flex-shrink:7;margin-inline-end:auto;align-items:normal;text-align:left}[tuiCell] [tuiTitle]~[tuiTitle]{flex-shrink:3;margin-inline-end:0;text-align:right;align-items:flex-end}[tuiCell] [tuiTitle]~[tuiTitle][tuiFade]{align-items:flex-start}[tuiCell] tui-badge-notification[data-size=xs]{position:absolute;top:50%;transform:translateY(-50%);left:-.625rem}[tuiCell][data-size=s]{--t-height: calc(var(--tui-height-s) - .5rem);--t-padding: .125rem 1rem}[tuiCell][data-size=s] [tuiTitle]{max-height:100%;font:var(--tui-font-text-ui-s);gap:0}[tuiCell][data-size=s] [tuiSubtitle]{font:var(--tui-font-text-ui-xs)}[tuiCell][data-size=s]>*:not(:first-child),[tuiCell][data-size=s]>[tuiAccessories]>*:not(:first-child){margin-inline-start:.5rem}[tuiCell][data-size=s]>tui-avatar,[tuiCell][data-size=s]>tui-avatar-stack tui-avatar,[tuiCell][data-size=s]>[tuiAccessories] tui-avatar,[tuiCell][data-size=s]>[tuiAccessories] tui-avatar-stack tui-avatar{--t-size: 1.5rem;font:var(--tui-font-text-m);font-size:.5625rem}[tuiCell][data-size=m]{--t-height: calc(var(--tui-height-m) - .75rem);--t-padding: .375rem 1rem}[tuiCell][data-size=m] [tuiTitle]{font:var(--tui-font-text-ui-s);gap:.125rem}[tuiCell][data-size=m] [tuiSubtitle]{font:var(--tui-font-text-ui-xs)}[tuiCell][data-size=m]>*:not(:first-child),[tuiCell][data-size=m]>[tuiAccessories]>*:not(:first-child){margin-inline-start:.75rem}[tuiCell][data-size=m]>tui-avatar,[tuiCell][data-size=m]>tui-avatar-stack tui-avatar,[tuiCell][data-size=m]>[tuiAccessories] tui-avatar,[tuiCell][data-size=m]>[tuiAccessories] tui-avatar-stack tui-avatar{--t-size: 2rem}[tuiCell][data-size=l]{--t-height: calc(var(--tui-height-l) - 1rem);--t-padding: .5rem 1rem}[tuiCell][data-size=l]>*:not(:first-child),[tuiCell][data-size=l]>[tuiAccessories]>*:not(:first-child){margin-inline-start:1rem}[tuiCell][data-size=l]>tui-avatar,[tuiCell][data-size=l]>tui-avatar-stack tui-avatar,[tuiCell][data-size=l]>[tuiAccessories] tui-avatar,[tuiCell][data-size=l]>[tuiAccessories] tui-avatar-stack tui-avatar{--t-size: 2.5rem;font:var(--tui-font-text-m);font-weight:700}[tuiCell]:hover [tuiCellActions]~*{opacity:0}[tuiCell]:hover [tuiCellActions] button,[tuiCell]:hover [tuiCellActions] a{opacity:1}[tuiOption] [tuiCell],tui-primitive-textfield [tuiCell]{padding:0}@media (hover: hover) and (pointer: fine){a[tuiCell]:not([tuiSurface]):hover,button[tuiCell]:not([tuiSurface]):hover{background:var(--tui-background-neutral-1);cursor:pointer}}
`],encapsulation:2,changeDetection:0});let n=t;return n})(),Xi=(()=>{let t=class t{constructor(){this.nothing=me(Rn),this.size=""}};t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=y({type:t,selectors:[["","tuiCell","",5,"ng-template"]],hostAttrs:["tuiCell",""],hostVars:1,hostBindings:function(i,o){i&2&&J("data-size",o.size||"l")},inputs:{size:[0,"tuiCell","size"]},standalone:!0,features:[B([xe({size:"m"}),Ee({size:"s"})])]});let n=t;return n})();function w(n,t,s){let e=Math.min(Number(s),Math.max(Number(t),Number(n)));return n instanceof Date?new Date(e):e}function Ke(n){return n.replaceAll(/\W/g,"").length}function We(n,{day:t,month:s,year:e}={}){let i=new Date(n);return t&&i.setDate(i.getDate()+t),s&&i.setMonth(i.getMonth()+s),e&&i.setFullYear(i.getFullYear()+e),i}var Qe=n=>{var t,s,e;return{day:((t=n.match(/d/g))===null||t===void 0?void 0:t.length)||0,month:((s=n.match(/m/g))===null||s===void 0?void 0:s.length)||0,year:((e=n.match(/y/g))===null||e===void 0?void 0:e.length)||0}};function qe(n){return{day:String(n.getDate()).padStart(2,"0"),month:String(n.getMonth()+1).padStart(2,"0"),year:String(n.getFullYear()).padStart(4,"0"),hours:String(n.getHours()).padStart(2,"0"),minutes:String(n.getMinutes()).padStart(2,"0"),seconds:String(n.getSeconds()).padStart(2,"0"),milliseconds:String(n.getMilliseconds()).padStart(3,"0")}}function In(n,t){let s=Ke(t),[e=""]=n.match(new RegExp(`(\\D*\\d){${s}}`))||[];return e}function Mt(n,t){return n.length<t.length?!1:n.split(/\D/).every(s=>!s.match(/^0+$/))}function X(n,t,s){let e=Ke(t);return n.replace(s,"").match(new RegExp(`(\\D*\\d[^\\d\\s]*){1,${e}}`,"g"))||[]}function K(n,t){let s=t.replaceAll(/[^dmy]/g,""),e=n.replaceAll(/\D+/g,""),i={day:e.slice(s.indexOf("d"),s.lastIndexOf("d")+1),month:e.slice(s.indexOf("m"),s.lastIndexOf("m")+1),year:e.slice(s.indexOf("y"),s.lastIndexOf("y")+1)};return Object.fromEntries(Object.entries(i).filter(([o,r])=>!!r).sort(([o],[r])=>t.toLowerCase().indexOf(o.slice(0,1))>t.toLowerCase().indexOf(r.slice(0,1))?1:-1))}function Nt(n,t){var s,e,i,o,r,l,a;let u=((s=n.year)===null||s===void 0?void 0:s.length)===2?`20${n.year}`:n.year,c=new Date(Number(u??"0"),Number((e=n.month)!==null&&e!==void 0?e:"1")-1,Number((i=n.day)!==null&&i!==void 0?i:"1"),Number((o=t==null?void 0:t.hours)!==null&&o!==void 0?o:"0"),Number((r=t==null?void 0:t.minutes)!==null&&r!==void 0?r:"0"),Number((l=t==null?void 0:t.seconds)!==null&&l!==void 0?l:"0"),Number((a=t==null?void 0:t.milliseconds)!==null&&a!==void 0?a:"0"));return c.setFullYear(Number(u??"0")),c}var Je=", ";function V({day:n,month:t,year:s,hours:e,minutes:i,seconds:o,milliseconds:r},{dateMode:l,dateTimeSeparator:a=Je,timeMode:u}){var c;let d=((c=l.match(/y/g))===null||c===void 0?void 0:c.length)===2?s==null?void 0:s.slice(-2):s;return(l+(u?a+u:"")).replaceAll(/d+/g,n??"").replaceAll(/m+/g,t??"").replaceAll(/y+/g,d??"").replaceAll(/H+/g,e??"").replaceAll("MSS",r??"").replaceAll(/M+/g,i??"").replaceAll(/S+/g,o??"").replaceAll(/^\D+/g,"").replaceAll(/\D+$/g,"")}var tn={day:31,month:12,year:9999},Fn=[".",",","\u0431","\u044E"],Vn=new Date("0001-01-01"),en=new Date("9999-12-31");var kn=[":","."];var wt="\xA0",Ln="\u200B",ft="\u2013",Ot="\u2014",Y="-",pt="\u2212",Rt="\u30FC";function $n({dateString:n,dateModeTemplate:t,dateSegmentsSeparator:s,offset:e,selection:[i,o]}){let r=K(n,t),l=Object.entries(r),a={};for(let[d,h]of l){let m=V(a,{dateMode:t}),p=tn[d],f=m.length&&s.length,g=e+m.length+f+Qe(t)[d],E=g>=i&&g===o;if(E&&Number(h)>Number(p))return{validatedDateString:"",updatedSelection:[i,o]};if(E&&Number(h)<1)return{validatedDateString:"",updatedSelection:[i,o]};a[d]=h}let u=V(a,{dateMode:t}),c=u.length-n.length;return{validatedDateString:u,updatedSelection:[i+c,o+c]}}var nn=/[\\^$.*+?()[\]{}|]/g,jn=new RegExp(nn.source);function v(n){return n&&jn.test(n)?n.replaceAll(nn,String.raw`\$&`):n}function D(n,{prefix:t,postfix:s}){var e,i;let o=new RegExp(`^${v(t)}`),r=new RegExp(`${v(s)}$`),[l=""]=(e=n.match(o))!==null&&e!==void 0?e:[],[a=""]=(i=n.match(r))!==null&&i!==void 0?i:[],u=n.replace(o,"").replace(r,"");return{extractedPrefix:l,extractedPostfix:a,cleanValue:u}}function Hn(n,t){let s="";for(let e=0;e<n.length;e++){if(n[e]!==t[e])return s;s+=n[e]}return s}function k(n){return n}function Pt(n){return!n||typeof n=="object"&&Object.keys(n).length===0}var zn=/^0+$/;function Tt(n,t,s=0){let e=n.padEnd(t.length,"0");if(Number(e)<=Number(t))return{validatedSegmentValue:n,prefixedZeroesCount:s};if(e.endsWith("0"))return Tt(`0${n.slice(0,t.length-1)}`,t,s+1);let i=n.slice(0,t.length-1);return i.match(zn)?{validatedSegmentValue:"",prefixedZeroesCount:s}:Tt(`${i}0`,t,s)}function Ge(n){return n.replaceAll(/[０-９]/g,t=>String.fromCharCode(t.charCodeAt(0)-65248))}function sn({dateModeTemplate:n,dateSegmentSeparator:t,splitFn:s,uniteFn:e}){return({value:i,selection:o})=>{var r;let[l,a]=o,{dateStrings:u,restPart:c=""}=s(i),d=[],h=0;u.forEach(p=>{let f=K(p,n),E=Object.entries(f).reduce((b,[x,A])=>{let{validatedSegmentValue:Vt,prefixedZeroesCount:L}=Tt(A,`${tn[x]}`);return h+=L,Object.assign(Object.assign({},b),{[x]:Vt})},{});d.push(V(E,{dateMode:n}))});let m=e(d,i)+(!((r=u[u.length-1])===null||r===void 0)&&r.endsWith(t)?t:"")+c;return h&&m.slice(a+h,a+h+t.length)===t&&(h+=t.length),{selection:[l+h,a+h],value:m}}}function Un({dateModeTemplate:n,firstDateEndSeparator:t,dateSegmentSeparator:s,pseudoFirstDateEndSeparators:e}){return({elementState:i,data:o})=>{let{value:r,selection:l}=i,a=In(r,n),u=e.filter(d=>!t.includes(d)&&d!==s),c=new RegExp(`[${u.join("")}]`,"gi");return{elementState:{selection:l,value:a&&r.length>a.length?a+r.slice(a.length).replace(/^[\D\s]*/,t):r},data:o.replace(c,t)}}}function It(){return({elementState:n,data:t})=>{let{value:s,selection:e}=n;return{elementState:{selection:e,value:Ge(s)},data:Ge(t)}}}function Bn(n,t){let s=Qe(t);return Object.fromEntries(Object.entries(n).map(([e,i])=>{let o=s[e];return[e,i.length===o&&i.match(/^0+$/)?"1".padStart(o,"0"):i]}))}function on({dateModeTemplate:n,min:t=Vn,max:s=en,rangeSeparator:e="",dateSegmentSeparator:i="."}){return({value:o,selection:r})=>{let l=e&&o.endsWith(e),a=X(o,n,e),u="";for(let c of a){u+=u?e:"";let d=K(c,n);if(!Mt(c,n)){let p=Bn(d,n),f=V(p,{dateMode:n}),g=c.endsWith(i)?i:"";u+=f+g;continue}let h=Nt(d),m=w(h,t,s);u+=V(qe(m),{dateMode:n})}return{selection:r,value:u+(l?e:"")}}}function rn({dateModeTemplate:n,dateSegmentsSeparator:t,rangeSeparator:s="",dateTimeSeparator:e=Je}){return({elementState:i,data:o})=>{let r=s?new RegExp(`${s}|-`):e,l=o.split(r),a=o.includes(e)?[l[0]||""]:l;if(a.every(u=>u.trim().split(/\D/).filter(Boolean).length===n.split(t).length)){let u=a.map(c=>Wn(c,n,t)).join(s);return{elementState:i,data:`${u}${o.includes(e)&&e+l[1]||""}`}}return{elementState:i,data:o}}}function Wn(n,t,s){let e=n.split(/\D/).filter(Boolean),i=t.split(s);return e.map((r,l)=>{var a;return l===i.length-1?r:r.padStart(((a=i[l])===null||a===void 0?void 0:a.length)||0,"0")}).join(s)}function Gn(n){let t=new RegExp(`${v(n)}$`);return n?({value:s,selection:e},i)=>{if(!s&&!i.value.endsWith(n))return{value:s,selection:e};if(!s.endsWith(n)&&!i.value.endsWith(n))return{selection:e,value:s+n};let o=i.value.replace(t,""),r=i.selection[1]>=o.length,l=Hn(o,s);return{selection:e,value:Array.from(n).reverse().reduce((a,u,c)=>{let d=a.length-1-c,h=l[d]===u&&r;return a[d]!==u||h?a.slice(0,d+1)+u+a.slice(d+1):a},s)}}:k}function Zn(n){return n?({value:t,selection:s},e)=>{if(t.startsWith(n)||!t&&!e.value.startsWith(n))return{value:t,selection:s};let[i,o]=s,r=Array.from(n).reduce((a,u,c)=>a[c]===u?a:a.slice(0,c)+u+a.slice(c),t),l=r.length-t.length;return{selection:[i+l,o+l],value:r}}:k}function an({dateModeTemplate:n,dateSegmentsSeparator:t,rangeSeparator:s=""}){return({elementState:e,data:i})=>{let{value:o,selection:r}=e;if(i===t)return{elementState:e,data:r[0]===o.length?i:""};let l=i.replaceAll(new RegExp(`[^\\d${v(t)}${s}]`,"g"),"");if(!l)return{elementState:e,data:""};let[a,u]=r,c=u+i.length,d=o.slice(0,a)+l+o.slice(c),h=X(d,n,s),m="",p=!!s&&d.includes(s);for(let g of h){let{validatedDateString:E,updatedSelection:b}=$n({dateString:g,dateModeTemplate:n,dateSegmentsSeparator:t,offset:m.length,selection:[a,c]});if(g&&!E)return{elementState:e,data:""};c=b[1],m+=p&&!m?E+s:E}let f=m.slice(a,c);return{elementState:{selection:r,value:m.slice(0,a)+f.split(t).map(g=>"0".repeat(g.length)).join(t)+m.slice(c)},data:f}}}function Ft(n,t,s){return(e,i)=>{let o=()=>t(e,i);return e.addEventListener(n,o,s),()=>e.removeEventListener(n,o,s)}}function ln(n){return t=>{let s=t.ownerDocument,e=0,i=()=>e++,o=()=>{e=Math.max(--e,0)},r=()=>{if(!t.matches(":focus"))return;if(e)return s.addEventListener("mouseup",r,{once:!0,passive:!0});let l=t.selectionStart||0,a=t.selectionEnd||0,[u,c]=n(t.value,[l,a]);(u>l||c<a)&&t.setSelectionRange(w(l,u,c),w(a,u,c))};return s.addEventListener("selectionchange",r,{passive:!0}),t.addEventListener("mousedown",i,{passive:!0}),s.addEventListener("mouseup",o,{passive:!0}),()=>{s.removeEventListener("selectionchange",r),s.removeEventListener("mousedown",i),s.removeEventListener("mouseup",o)}}}function un(){return({elementState:n},t)=>{let{value:s,selection:e}=n;if(!s||Yn(s,e))return{elementState:n};let[i,o]=e,r=s.slice(i,o).replaceAll(/\d/g,"0"),l=s.slice(0,i)+r+s.slice(o);return t==="validation"||t==="insert"&&i===o?{elementState:{selection:e,value:l}}:{elementState:{selection:t==="deleteBackward"||t==="insert"?[i,i]:[o,o],value:l}}}}function Yn(n,[t,s]){return s===n.length}function qi({mode:n,separator:t=".",max:s,min:e}){let i=n.split("/").join(t);return Object.assign(Object.assign({},O),{mask:Array.from(i).map(o=>t.includes(o)?o:/\d/),overwriteMode:"replace",preprocessors:[It(),un(),rn({dateModeTemplate:i,dateSegmentsSeparator:t}),an({dateModeTemplate:i,dateSegmentsSeparator:t})],postprocessors:[sn({dateModeTemplate:i,dateSegmentSeparator:t,splitFn:o=>({dateStrings:[o]}),uniteFn:([o=""])=>o}),on({min:e,max:s,dateModeTemplate:i,dateSegmentSeparator:t})]})}var Xn=[Y,ft,Ot,pt,Rt];function Kn({dateModeTemplate:n,rangeSeparator:t,minLength:s,maxLength:e,max:i=en}){return Pt(s)&&Pt(e)?k:({value:o,selection:r})=>{let l=X(o,n,t);if(l.length!==2||l.some(p=>!Mt(p,n)))return{value:o,selection:r};let[a,u]=l.map(p=>Nt(K(p,n)));if(!a||!u)return{value:o,selection:r};let c=We(a,Object.assign(Object.assign({},s),{day:(s==null?void 0:s.day)&&s.day-1})),d=Pt(e)?i:We(a,Object.assign(Object.assign({},e),{day:(e==null?void 0:e.day)&&e.day-1})),h=w(u,c,i),m=h>d?d:h;return{selection:r,value:l[0]+t+V(qe(m),{dateMode:n})}}}function Qn({dateModeTemplate:n,rangeSeparator:t}){return({value:s,selection:e})=>{let i=X(s,n,t),o=i.length===2&&i.every(h=>Mt(h,n)),[r,l]=e,a=r>=s.length,u=r===0&&l>=s.length;if(!(a||u)||!o)return{value:s,selection:e};let[c,d]=i.map(h=>Nt(K(h,n)));return{selection:e,value:c&&d&&c>d?i.reverse().join(t):s}}}function Ji({mode:n,min:t,max:s,minLength:e,maxLength:i,dateSeparator:o=".",rangeSeparator:r=`${wt}${ft}${wt}`}){let l=n.split("/").join(o),a=Array.from(l).map(u=>o.includes(u)?u:/\d/);return Object.assign(Object.assign({},O),{mask:[...a,...Array.from(r),...a],overwriteMode:"replace",preprocessors:[It(),Un({dateModeTemplate:l,dateSegmentSeparator:o,firstDateEndSeparator:r,pseudoFirstDateEndSeparators:Xn}),un(),rn({dateModeTemplate:l,rangeSeparator:r,dateSegmentsSeparator:o}),an({dateModeTemplate:l,rangeSeparator:r,dateSegmentsSeparator:o})],postprocessors:[sn({dateModeTemplate:l,dateSegmentSeparator:o,splitFn:u=>({dateStrings:X(u,l,r)}),uniteFn:(u,c)=>u.reduce((d,h,m)=>d+h+(!m&&c.includes(r)?r:""),"")}),on({min:t,max:s,dateModeTemplate:l,rangeSeparator:r,dateSegmentSeparator:o}),Kn({dateModeTemplate:l,minLength:e,maxLength:i,max:s,rangeSeparator:r}),Qn({dateModeTemplate:l,rangeSeparator:r})]})}var ts=new RegExp(`[${kn.map(v).join("")}]$`);function qn({prefix:n,postfix:t}){return({elementState:s,data:e})=>{let{cleanValue:i}=D(e,{prefix:n,postfix:t});return{elementState:s,data:i}}}function cn({decimalSeparator:n,isNegativeAllowed:t,precision:s,thousandSeparator:e,prefix:i,postfix:o,decimalPseudoSeparators:r=[],pseudoMinuses:l=[],minusSign:a}){let u=Ze(i),c=String.raw`\d`,d=t?`[${a}${l.map(f=>`\\${f}`).join("")}]?`:"",h=e?`[${c}${v(e).replaceAll(/\s/g,String.raw`\s`)}]*`:`[${c}]*`,m=s>0?`([${v(n)}${r.map(v).join("")}]${c}{0,${Number.isFinite(s)?s:""}})?`:"",p=Ze(o);return new RegExp(`^${u}${d}${h}${m}${p}$`)}function Ze(n){return n?`${n.split("").map(t=>`${v(t)}?`).join("")}`:""}function R(n,t="."){let s=!!n.match(new RegExp(`^\\D*[${pt}\\${Y}${ft}${Ot}${Rt}]`)),e=v(t),i=n.replaceAll(new RegExp(`${e}(?!\\d)`,"g"),"").replaceAll(new RegExp(`[^\\d${e}]`,"g"),"").replace(t,".");return i?Number((s?Y:"")+i):NaN}function Jn(n){let t=String(n),[s="",e]=t.split("e-"),i=t;if(e){let[,o]=s.split("."),r=Number(e)+((o==null?void 0:o.length)||0);i=n.toFixed(r)}return i}function dn(n,{decimalSeparator:t,thousandSeparator:s}){let[e="",i=""]=n.split(t),[,o="",r=""]=e.match(new RegExp(`([^\\d${v(s)}]+)?(.*)`))||[];return{minus:o,integerPart:r,decimalPart:i}}function ti({decimalSeparator:n,thousandSeparator:t,decimalPseudoSeparators:s=Fn}){return s.filter(e=>e!==t&&e!==n)}function ei({decimalSeparator:n,precision:t,decimalZeroPadding:s,prefix:e,postfix:i}){return t<=0||!s?k:({value:o,selection:r})=>{let{cleanValue:l,extractedPrefix:a,extractedPostfix:u}=D(o,{prefix:e,postfix:i});if(Number.isNaN(R(l,n)))return{value:o,selection:r};let[c,d=""]=l.split(n);return{value:a+c+n+d.padEnd(t,"0")+u,selection:r}}}function ni({prefix:n,postfix:t,decimalSeparator:s,thousandSeparator:e}){return({value:i,selection:o})=>{let[r]=o,{cleanValue:l,extractedPrefix:a,extractedPostfix:u}=D(i,{prefix:n,postfix:t}),{minus:c,integerPart:d,decimalPart:h}=dn(l,{decimalSeparator:s,thousandSeparator:e}),m=!d&&!h&&l.includes(s);return!d&&!Number(h)&&r===(c+a).length||m?{selection:o,value:a+c+u}:{value:i,selection:o}}}function ii({decimalSeparator:n,decimalPseudoSeparators:t,pseudoMinuses:s,prefix:e,postfix:i,minusSign:o}){let r=!0,l=cn({decimalSeparator:n,decimalPseudoSeparators:t,pseudoMinuses:s,prefix:"",postfix:"",thousandSeparator:"",precision:1/0,isNegativeAllowed:!0,minusSign:o});return({elementState:a,data:u})=>{if(!r)return{elementState:a,data:u};r=!1;let{value:c,selection:d}=a,[h,m]=d,{extractedPrefix:p,cleanValue:f,extractedPostfix:g}=D(c,{prefix:e,postfix:i}),E=F({selection:[Math.max(h-p.length,0),w(m-p.length,0,f.length)],value:f},{mask:l}),[b,x]=E.selection;return{elementState:{selection:[b+p.length,x+p.length],value:p+E.value+g},data:u}}}function si({decimalSeparator:n,thousandSeparator:t,prefix:s,postfix:e}){let i=r=>{let l=v(t);return r.replace(new RegExp(`^(\\D+)?[0${l}]+(?=0)`),"$1").replace(new RegExp(`^(\\D+)?[0${l}]+(?=[1-9])`),"$1")},o=(r,l)=>{let a=r.slice(0,l),u=r.slice(l).startsWith("0");return a.length-i(a).length+(u?1:0)};return({value:r,selection:l})=>{let[a,u]=l,{cleanValue:c,extractedPrefix:d,extractedPostfix:h}=D(r,{prefix:s,postfix:e}),m=c.includes(n),[p="",f=""]=c.split(n),g=i(p);if(p===g)return{value:r,selection:l};let E=a-o(r,a),b=u-o(r,u);return{value:d+g+(m?n:"")+f+h,selection:[Math.max(E,0),Math.max(b,0)]}}}function oi({min:n,max:t,decimalSeparator:s,minusSign:e}){return({value:i,selection:o})=>{let r=R(i,s),l=r>0?Math.min(r,t):Math.max(r,n);if(r&&l!==r){let a=`${l}`.replace(".",s).replace(Y,e);return{value:a,selection:[a.length,a.length]}}return{value:i,selection:o}}}function ri({decimalSeparator:n,thousandSeparator:t,decimalZeroPadding:s}){return({elementState:e,data:i},o)=>{let{value:r,selection:l}=e,[a,u]=l,c=r.slice(a,u),d=s?[n,t]:[t],h=s&&a>r.indexOf(n)&&!!c.match(/^0+$/gi);return o!=="deleteBackward"&&o!=="deleteForward"||!d.includes(c)&&!h?{elementState:e,data:i}:{elementState:{value:r,selection:o==="deleteForward"?[u,u]:[a,a]},data:i}}}function ai({decimalSeparator:n,precision:t,prefix:s,postfix:e}){let i=new RegExp(`^\\D*${v(n)}`);return({elementState:o,data:r})=>{let{value:l,selection:a}=o,{cleanValue:u,extractedPrefix:c}=D(l,{prefix:s,postfix:e}),[d,h]=a,m=w(d-c.length,0,u.length),p=w(h-c.length,0,u.length);if(t<=0||u.slice(0,m).includes(n)||u.slice(p).includes(n)||!r.match(i))return{elementState:o,data:r};let f=u.slice(0,m).match(/\d+/);return{elementState:o,data:f?r:`0${r}`}}}function Ye({validCharacter:n,pseudoCharacters:t,prefix:s,postfix:e}){let i=new RegExp(`[${t.join("")}]`,"gi");return({elementState:o,data:r})=>{let{value:l,selection:a}=o,{cleanValue:u,extractedPostfix:c,extractedPrefix:d}=D(l,{prefix:s,postfix:e});return{elementState:{selection:a,value:d+u.replace(i,n)+c},data:r.replace(i,n)}}}function li({decimalSeparator:n,prefix:t,postfix:s}){return({elementState:e,data:i})=>{let{value:o,selection:r}=e,[l,a]=r,{cleanValue:u}=D(o,{prefix:t,postfix:s});return{elementState:e,data:!u.includes(n)||o.slice(l,a+1).includes(n)?i:i.replaceAll(new RegExp(v(n),"gi"),"")}}}function ui({thousandSeparator:n,decimalSeparator:t,prefix:s,postfix:e}){if(!n)return k;let i=(...o)=>o.every(r=>/\s/.test(r));return({value:o,selection:r})=>{let{cleanValue:l,extractedPostfix:a,extractedPrefix:u}=D(o,{prefix:s,postfix:e}),{minus:c,integerPart:d,decimalPart:h}=dn(l,{decimalSeparator:t,thousandSeparator:n}),[m,p]=r,[f,g]=r,E=Array.from(d).reduceRight((b,x,A)=>{let L=!(!A&&x===n)&&b.length&&(b.length+1)%4===0;return L&&(x===n||i(x,n))?n+b:x===n&&!L?(A&&A<=m&&f--,A&&A<=p&&g--,b):L?(A<=m&&f++,A<=p&&g++,x+n+b):x+b},"");return{value:u+c+E+(l.includes(t)?t:"")+h+a,selection:[f,g]}}}function ci({precision:n,decimalSeparator:t,prefix:s,postfix:e}){if(n>0)return k;let i=new RegExp(`${v(t)}.*$`,"g");return({elementState:o,data:r})=>{let{value:l,selection:a}=o,{cleanValue:u,extractedPrefix:c,extractedPostfix:d}=D(l,{prefix:s,postfix:e}),[h,m]=a,p=c+u.replace(i,"")+d;return{elementState:{selection:[Math.min(h,p.length),Math.min(m,p.length)],value:p},data:r.replace(i,"")}}}var Xe=[0,0];function di({decimalSeparator:n,thousandSeparator:t,prefix:s,postfix:e}){let i=si({decimalSeparator:n,thousandSeparator:t,prefix:s,postfix:e});return Ft("blur",o=>{let r=i({value:o.value,selection:Xe},{value:"",selection:Xe}).value;mt(o,r)},{capture:!0})}function hi({min:n,max:t,decimalSeparator:s}){return Ft("blur",(e,i)=>{let o=R(e.value,s),r=w(o,n,t);!Number.isNaN(o)&&o!==r&&mt(e,F(Jn(r),i))},{capture:!0})}function mi({decimalSeparator:n,prefix:t,postfix:s}){return Ft("blur",e=>{let{cleanValue:i,extractedPostfix:o,extractedPrefix:r}=D(e.value,{prefix:t,postfix:s}),l=r+i.replace(new RegExp(`^(\\D+)?${v(n)}`),`$10${n}`)+o;mt(e,l)},{capture:!0})}function hn({max:n=Number.MAX_SAFE_INTEGER,min:t=Number.MIN_SAFE_INTEGER,precision:s=0,thousandSeparator:e=wt,decimalSeparator:i=".",decimalPseudoSeparators:o,decimalZeroPadding:r=!1,prefix:l="",postfix:a="",minusSign:u=pt}={}){let c=[Y,ft,Ot,Rt,pt].filter(m=>m!==e&&m!==i&&m!==u),d=ti({decimalSeparator:i,thousandSeparator:e,decimalPseudoSeparators:o}),h=l.endsWith(i)&&s>0?`${l}${Ln}`:l;return Object.assign(Object.assign({},O),{mask:cn({decimalSeparator:i,precision:s,thousandSeparator:e,prefix:h,postfix:a,isNegativeAllowed:t<0,minusSign:u}),preprocessors:[It(),ii({decimalSeparator:i,decimalPseudoSeparators:d,pseudoMinuses:c,prefix:h,postfix:a,minusSign:u}),qn({prefix:h,postfix:a}),Ye({validCharacter:u,pseudoCharacters:c,prefix:h,postfix:a}),Ye({validCharacter:i,pseudoCharacters:d,prefix:h,postfix:a}),ai({decimalSeparator:i,precision:s,prefix:h,postfix:a}),ri({decimalSeparator:i,decimalZeroPadding:r,thousandSeparator:e}),ci({precision:s,decimalSeparator:i,prefix:h,postfix:a}),li({decimalSeparator:i,prefix:h,postfix:a})],postprocessors:[oi({decimalSeparator:i,min:t,max:n,minusSign:u}),Zn(h),Gn(a),ui({decimalSeparator:i,thousandSeparator:e,prefix:h,postfix:a}),ei({decimalSeparator:i,decimalZeroPadding:r,precision:s,prefix:h,postfix:a}),ni({prefix:h,postfix:a,decimalSeparator:i,thousandSeparator:e})],plugins:[di({decimalSeparator:i,thousandSeparator:e,prefix:h,postfix:a}),mi({decimalSeparator:i,prefix:h,postfix:a}),hi({min:t,max:n,decimalSeparator:i})],overwriteMode:r?({value:m,selection:[p]})=>p<=m.indexOf(i)?"shift":"replace":"shift"})}var pi=["*",[["input"]],[["tuiContent"]]],fi=["*","input","tuiContent"];function gi(n,t){if(n&1&&(Zt(0),et(1),Yt()),n&2){let s=t.polymorpheusOutlet;S(),Jt(" ",s," ")}}function vi(n,t){if(n&1&&(H(0,"div",6),j(1,gi,2,1,"ng-container",7),z()),n&2){N();let s=_t(9);S(),P("polymorpheusOutlet",s)}}function Ei(n,t){if(n&1){let s=bt();H(0,"section",8)(1,"button",9),U("click.prevent",function(){T(s);let i=N();return M(i.onArrow(i.step))})("mousedown.prevent",function(){T(s);let i=N();return M(i.nativeFocusableElement==null?null:i.nativeFocusableElement.focus())}),et(2," + "),z(),H(3,"button",9),U("click.prevent",function(){T(s);let i=N();return M(i.onArrow(-i.step))})("mousedown.prevent",function(){T(s);let i=N();return M(i.nativeFocusableElement==null?null:i.nativeFocusableElement.focus())}),et(4," - "),z()()}if(n&2){let s=N(),e=_t(1);S(),P("appearance",e.appearance)("disabled",!s.canIncrement)("iconStart",s.icons.up),S(2),P("appearance",e.appearance)("disabled",!s.canDecrement)("iconStart",s.icons.down)}}function bi(n,t){n&1&&Xt(0)}function Ci(n,t){n&1&&tt(0,2)}var mn={icons:{up:"@tui.plus",down:"@tui.minus"},min:Number.MIN_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,step:0},pn=ce(mn);function Rs(n){return he(pn,n,mn)}var xi=18,_i=new jt(""),Is=(()=>{let t=class t extends Se{constructor(){super(...arguments),this.isIOS=C(Ce),this.textfieldSize=C(Te),this.options=C(pn),this.unfinishedValue="",this.polymorpheusValueContent=pe,this.valueTransformer=C(_i,{optional:!0}),this.numberFormat=ot,this.controller=C(Ne),this.numberFormat$=C(ve).pipe(ge(this.cdr),ue()).subscribe(e=>{this.numberFormat=e}),this.min=this.options.min,this.max=this.options.max,this.step=this.options.step}get nativeFocusableElement(){return!this.textfield||this.computedDisabled?null:this.textfield.nativeFocusableElement}get focused(){var e;return!!((e=this.textfield)!=null&&e.focused)}get inputMode(){return this.isIOS&&this.isNegativeAllowed?"text":this.precision?"decimal":"numeric"}get calculatedMaxLength(){let i=!!this.precision&&this.nativeValue.includes(this.numberFormat.decimalSeparator)?Math.min(this.precision+1,20):0,o=this.numberFormat.thousandSeparator.repeat(5).length;return xi+i+o}get computedValue(){return this.focused?this.nativeValue:this.formattedValue}onValueChange(e){let i=R(e,this.numberFormat.decimalSeparator);if(this.unfinishedValue=null,Number.isNaN(i)){this.value=null;return}if(this.isNativeValueNotFinished){this.unfinishedValue=e,this.cdr.markForCheck();return}i<this.computedMin||i>this.computedMax||(this.value=i)}writeValue(e){super.writeValue(e),this.nativeValue=this.formattedValue}get size(){return this.textfieldSize.size}get icons(){return this.options.icons}get computedMin(){return this.computeMin(this.min,this.max)}get computedMax(){return this.computeMax(this.min,this.max)}get isNegativeAllowed(){return this.computedMin<0}get formattedValue(){return this.value!==null?this.getFormattedValue(this.value||0):""}get canDecrement(){return this.interactive&&(this.value||0)>this.computedMin}get canIncrement(){return this.interactive&&(this.value||0)<this.computedMax}get computedPrefix(){return this.controller.prefix}get computedPostfix(){let e=this.controller.postfix;return e&&` ${e}`}get mask(){return this.calculateMask(this.precision,this.numberFormat.decimalMode,this.numberFormat.decimalSeparator,this.numberFormat.thousandSeparator,this.computedMin,this.computedMax,this.computedPrefix,this.computedPostfix)}get nativeValue(){var e;return((e=this.nativeFocusableElement)==null?void 0:e.value)||""}set nativeValue(e){!this.textfield||!this.nativeFocusableElement||(this.textfield.value=e,this.nativeFocusableElement.value=e)}onArrow(e){e&&(this.value=nt((this.value||0)+e,this.computedMin,this.computedMax),this.nativeValue=this.formattedValue)}onFocused(e){this.updateFocused(e);let i=this.unfinishedValue?R(this.unfinishedValue,this.numberFormat.decimalSeparator):this.nativeNumberValue;if(this.unfinishedValue=null,Number.isNaN(i)){this.nativeValue=e&&!this.readOnly?this.computedPrefix+this.computedPostfix:"",this.value=null;return}e||(this.value=i,this.nativeValue=this.formattedValue)}getFormattedValue(e){return this.computedPrefix+ke(e,$(I({},this.numberFormat),{precision:this.precision})).replace(st,fe)+this.computedPostfix}get isNativeValueNotFinished(){let e=this.nativeNumberValue;return e<0?e>this.computedMax:e<this.computedMin}get nativeNumberValue(){return R(this.nativeValue,this.numberFormat.decimalSeparator)}get precision(){return Number.isNaN(this.numberFormat.precision)?2:this.numberFormat.precision}computeMin(e,i){var o,r;return Math.min(((o=this.valueTransformer)==null?void 0:o.fromControlValue(e))??e??this.options.min,((r=this.valueTransformer)==null?void 0:r.fromControlValue(i))??i??this.options.max)}computeMax(e,i){var o,r;return Math.max(((o=this.valueTransformer)==null?void 0:o.fromControlValue(e))??e??this.options.min,((r=this.valueTransformer)==null?void 0:r.fromControlValue(i))??i??this.options.max)}calculateMask(e,i,o,r,l,a,u,c){let p=hn({decimalSeparator:o,thousandSeparator:r,min:l,max:a,prefix:u,postfix:c,precision:e,decimalZeroPadding:i==="always"}),{plugins:h}=p,m=kt(p,["plugins"]);return $(I({},m),{plugins:[...h,ln(f=>[u.length,f.length-c.length])]})}};t.\u0275fac=(()=>{let e;return function(o){return(e||(e=vt(t)))(o||t)}})(),t.\u0275cmp=q({type:t,selectors:[["tui-input-number"]],contentQueries:function(i,o,r){if(i&1&&Qt(r,rt,5),i&2){let l;Ct(l=xt())&&(o.polymorpheusValueContent=l)}},viewQuery:function(i,o){if(i&1&&qt(at,5),i&2){let r;Ct(r=xt())&&(o.textfield=r.first)}},hostVars:1,hostBindings:function(i,o){i&1&&U("keydown.arrowDown",function(){return o.onArrow(-o.step)})("keydown.arrowUp",function(){return o.onArrow(o.step)}),i&2&&J("data-size",o.size)},inputs:{min:"min",max:"max",step:"step"},features:[B([_e(t),Ae(t),Oe]),Et],ngContentSelectors:fi,decls:10,vars:14,consts:[["textfield",""],["valueContent",""],["tuiTextfieldPostfix","","tuiTextfieldPrefix","","tuiValueAccessor","",1,"t-textfield",3,"focusedChange","valueChange","disabled","focusable","invalid","maskito","pseudoActive","pseudoFocus","pseudoHover","readOnly","value"],["ngProjectAs","tuiContent","class","t-value-content",5,["tuiContent"],4,"ngIf"],["class","t-buttons",4,"ngIf"],[4,"ngIf"],["ngProjectAs","tuiContent",5,["tuiContent"],1,"t-value-content"],[4,"polymorpheusOutlet"],[1,"t-buttons"],["size","s","tabindex","-1","tuiIconButton","","type","button",1,"t-button",3,"click.prevent","mousedown.prevent","appearance","disabled","iconStart"]],template:function(i,o){if(i&1){let r=bt();Kt(pi),H(0,"tui-primitive-textfield",2,0),U("focusedChange",function(a){return T(r),M(o.onFocused(a))})("valueChange",function(a){return T(r),M(o.onValueChange(a))}),tt(2),tt(3,1,["ngProjectAs","input",5,["input"]]),j(4,vi,2,1,"div",3),z(),j(5,Ei,5,6,"section",4)(6,bi,1,0,"ng-container",5),ee(7,"async"),j(8,Ci,1,0,"ng-template",null,1,ie)}i&2&&(P("disabled",o.computedDisabled)("focusable",o.focusable)("invalid",o.computedInvalid)("maskito",o.mask)("pseudoActive",o.pseudoActive)("pseudoFocus",o.computedFocused)("pseudoHover",o.pseudoHover)("readOnly",o.readOnly)("value",o.computedValue),S(4),P("ngIf",o.polymorpheusValueContent.length),S(),P("ngIf",o.step),S(),P("ngIf",ne(7,12,o.polymorpheusValueContent.changes)))},dependencies:[se,Be,at,Fe,we,Pe,rt,Re,be,oe],styles:["[_nghost-%COMP%]{display:flex;border-radius:var(--tui-radius-m);text-align:left}.t-textfield[_ngcontent-%COMP%]{flex:1;min-width:0;max-width:100%;border-radius:inherit;text-align:inherit}.t-textfield[_ngcontent-%COMP%]:not(:last-child){border-top-right-radius:0;border-bottom-right-radius:0}.t-value-content[_ngcontent-%COMP%]{width:100%}.t-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;margin-left:.125rem;border-radius:inherit}[data-size=s][_ngcontent-%COMP%] + .t-buttons[_ngcontent-%COMP%]{flex-direction:row-reverse}[data-size=s][_ngcontent-%COMP%] + .t-buttons[_ngcontent-%COMP%]   .t-button[_ngcontent-%COMP%]:first-child{margin:0 0 0 .125rem;border-top-right-radius:inherit;border-bottom-right-radius:inherit}[data-size=s][_ngcontent-%COMP%] + .t-buttons[_ngcontent-%COMP%]   .t-button[_ngcontent-%COMP%]:last-child{border-radius:0}[data-size=m][_ngcontent-%COMP%] + .t-buttons[_ngcontent-%COMP%]   .t-button[_ngcontent-%COMP%]{width:calc(var(--tui-height-m) * .75)}[data-size=l][_ngcontent-%COMP%] + .t-buttons[_ngcontent-%COMP%]   .t-button[_ngcontent-%COMP%]{width:calc(var(--tui-height-l) * .75)}.t-buttons[_ngcontent-%COMP%]   .t-button[_ngcontent-%COMP%]{display:flex;flex:1;height:auto;align-items:center;justify-content:center;border-radius:0}.t-buttons[_ngcontent-%COMP%]   .t-button[_ngcontent-%COMP%]:first-child{margin-bottom:.125rem;border-top-right-radius:inherit}.t-buttons[_ngcontent-%COMP%]   .t-button[_ngcontent-%COMP%]:last-child{border-bottom-right-radius:inherit}"],changeDetection:0});let n=t;return Q([it],n.prototype,"computeMin",null),Q([it],n.prototype,"computeMax",null),Q([it],n.prototype,"calculateMask",null),n})(),Fs=(()=>{let t=class t extends ye{get value(){return this.host.computedValue}onValueChange(e){this.host.onValueChange(e)}ngDoCheck(){this.host.nativeFocusableElement&&(this.host.nativeFocusableElement.inputMode=this.host.inputMode,this.host.nativeFocusableElement.maxLength=this.host.nativeFocusableElement.maxLength>0?this.host.nativeFocusableElement.maxLength:this.host.calculatedMaxLength)}};t.\u0275fac=(()=>{let e;return function(o){return(e||(e=vt(t)))(o||t)}})(),t.\u0275dir=y({type:t,selectors:[["tui-input-number"]],features:[B([De(t)]),Et]});let n=t;return n})(),Vs=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=Ht({type:t}),t.\u0275inj=$t({imports:[re,Ve,Me,Ie]});let n=t;return n})();export{ke as a,Pi as b,Mi as c,Vi as d,O as e,Be as f,qi as g,Ji as h,hn as i,Xi as j,Rs as k,Is as l,Fs as m,Vs as n};
